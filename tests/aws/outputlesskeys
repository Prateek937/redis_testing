cluster Size: 1
------------------------------------------------------------------

[34m******* init  *******[0m

[33m### CREATING CLUSTER OF 3 NODES  172.31.5.126:6379 172.31.5.37:6379 172.31.5.95:6379 ###
[0m
> redis-cli --cluster create  172.31.5.126:6379 172.31.5.37:6379 172.31.5.95:6379 --cluster-replicas 0 --cluster-yes | grep OK | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion error.
 {
  keys1: 0,
  keys2: 0,
  keys: 0,
  slots1: 0,
  slots2: 16384,
  nodes1: 1,
  nodes2: 3,
  nodes: 2
}
precheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 0 keys | 0 slots | 0 slaves.
[OK] 0 keys in 1 masters.
0.00 keys per slot on average.

postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 0 keys | 5461 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 0 keys | 5461 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 0 keys | 5462 slots | 0 slaves.
[OK] 0 keys in 3 masters.
0.00 keys per slot on average.
 
total slots: 16384
cluster created successfully

[34m******* init  completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16662 keys | 5461 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16647 keys | 5461 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16691 keys | 5462 slots | 0 slaves.
[OK] 50000 keys in 3 masters.
3.05 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.102:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.102:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16662 keys | 5461 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16647 keys | 5461 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16691 keys | 5462 slots | 0 slaves.
[OK] 50000 keys in 4 masters.
3.05 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16662 keys | 5461 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16691 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16647 keys | 5461 slots | 0 slaves.
[OK] 50000 keys in 5 masters.
3.05 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16662 keys | 5461 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16691 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16647 keys | 5461 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 50000 keys in 6 masters.
3.05 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16662 keys | 5461 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16691 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16647 keys | 5461 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 50000 keys in 7 masters.
3.05 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.19:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.19:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16662 keys | 5461 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16691 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16647 keys | 5461 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 50000 keys in 8 masters.
3.05 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.102:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.102:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 6264 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 6241 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 6244 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 6237 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 6288 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 6235 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 6236 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 6255 keys | 2048 slots | 0 slaves.
[OK] 50000 keys in 8 masters.
3.05 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 12501 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 12480 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 12604 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 12508 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 12509 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 8 masters.
6.10 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.19:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.19:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 12501 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 12480 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 12604 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 12508 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 12509 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 8 masters.
6.10 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.126', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16720 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 12480 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 8385 keys | 1365 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 12508 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 12509 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 8 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.37', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16720 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16695 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 4170 keys | 682 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 12508 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 12509 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 8 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.95', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16720 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16695 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16678 keys | 2730 slots | 1 slaves.
172.31.5.219:6379 (3e541625...) -> 12509 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 7 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.19:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.19:6379 9f9a851bb5796c3056bf28312f467af266d7b0c6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16720 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 16695 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16678 keys | 2730 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 12509 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 7 masters.
6.10 keys per slot on average.
 
total slots: 16384
Removing node 9f9a851bb5796c3056bf28312f467af266d7b0c6 from cluster 172.31.5.19:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.37', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16720 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 20904 keys | 3414 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 16678 keys | 2730 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 8300 keys | 1365 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 7 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.95', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 16720 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 20904 keys | 3414 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 20808 keys | 3413 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 4170 keys | 682 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 7 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.126', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 20890 keys | 3413 slots | 1 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 20904 keys | 3414 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 20808 keys | 3413 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 6 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.219:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.219:6379 3e541625da6933354ce565dbcf61d9a7a9142dbd
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 20890 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 20904 keys | 3414 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 20808 keys | 3413 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12492 keys | 2048 slots | 0 slaves.
[OK] 100000 keys in 6 masters.
6.10 keys per slot on average.
 
total slots: 16384
Removing node 3e541625da6933354ce565dbcf61d9a7a9142dbd from cluster 172.31.5.219:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 20890 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 20904 keys | 3414 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 24943 keys | 4096 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 8357 keys | 1365 slots | 0 slaves.
[OK] 100000 keys in 6 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 25084 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 20904 keys | 3414 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 24943 keys | 4096 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 4163 keys | 682 slots | 0 slaves.
[OK] 100000 keys in 6 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 25084 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 25067 keys | 4096 slots | 1 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 24943 keys | 4096 slots | 0 slaves.
[OK] 100000 keys in 5 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 25084 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12419 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 25067 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 24943 keys | 4096 slots | 0 slaves.
[OK] 100000 keys in 5 masters.
6.10 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.126', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 29203 keys | 4779 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 8300 keys | 1365 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 25067 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 24943 keys | 4096 slots | 0 slaves.
[OK] 100000 keys in 5 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.37', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 29203 keys | 4779 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 4129 keys | 682 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 29238 keys | 4779 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 24943 keys | 4096 slots | 0 slaves.
[OK] 100000 keys in 5 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.95', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 29203 keys | 4779 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 29238 keys | 4779 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 29072 keys | 4778 slots | 1 slaves.
[OK] 100000 keys in 4 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.71:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.71:6379 6dcb7deea231e46f1e159b044f79761c38216436
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 29203 keys | 4779 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 29238 keys | 4779 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 12487 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 29072 keys | 4778 slots | 0 slaves.
[OK] 100000 keys in 4 masters.
6.10 keys per slot on average.
 
total slots: 16384
Removing node 6dcb7deea231e46f1e159b044f79761c38216436 from cluster 172.31.5.71:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.37', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 29203 keys | 4779 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 33437 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 8288 keys | 1365 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 29072 keys | 4778 slots | 0 slaves.
[OK] 100000 keys in 4 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.95', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 29203 keys | 4779 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 33437 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 4169 keys | 682 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 33191 keys | 5461 slots | 0 slaves.
[OK] 100000 keys in 4 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.126', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33372 keys | 5461 slots | 1 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 33437 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 33191 keys | 5461 slots | 0 slaves.
[OK] 100000 keys in 3 masters.
6.10 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.102:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.102:6379 d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33372 keys | 5461 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 33437 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 33191 keys | 5461 slots | 0 slaves.
[OK] 100000 keys in 3 masters.
6.10 keys per slot on average.
 
total slots: 16384
Removing node d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f from cluster 172.31.5.102:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33372 keys | 5461 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 33437 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 33191 keys | 5461 slots | 0 slaves.
[OK] 100000 keys in 3 masters.
6.10 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50042 keys | 5461 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49998 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49960 keys | 5461 slots | 0 slaves.
[OK] 150000 keys in 3 masters.
9.16 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.102:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.102:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50042 keys | 5461 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49998 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49960 keys | 5461 slots | 0 slaves.
[OK] 150000 keys in 4 masters.
9.16 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50042 keys | 5461 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49998 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49960 keys | 5461 slots | 0 slaves.
[OK] 150000 keys in 5 masters.
9.16 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50042 keys | 5461 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49998 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49960 keys | 5461 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 150000 keys in 6 masters.
9.16 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50042 keys | 5461 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49998 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49960 keys | 5461 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 150000 keys in 7 masters.
9.16 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.19:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.19:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50042 keys | 5461 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49998 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49960 keys | 5461 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 150000 keys in 8 masters.
9.16 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.102:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.102:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 18799 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 18716 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 18714 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 18750 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 18746 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 18788 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 18739 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 18748 keys | 2048 slots | 0 slaves.
[OK] 150000 keys in 8 masters.
9.16 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 25070 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 24939 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 25036 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 24998 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 25041 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 24981 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 8 masters.
12.21 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.19:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.19:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 25070 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 24939 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 25036 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 24998 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 25041 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 24981 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 8 masters.
12.21 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 512, 512, 512, 512 ] }
[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.126', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31270 keys | 2560 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 24939 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 25036 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 18798 keys | 1536 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 25041 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 24981 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 8 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.37', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31270 keys | 2560 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 31250 keys | 2560 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 25036 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 12487 keys | 1024 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 25041 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 24981 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 8 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.95', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31270 keys | 2560 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 31250 keys | 2560 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 25036 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 6278 keys | 512 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 31250 keys | 2560 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 24981 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 8 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.102', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31270 keys | 2560 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 31250 keys | 2560 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 31314 keys | 2560 slots | 1 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 31250 keys | 2560 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 24981 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 7 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.19:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.19:6379 9f9a851bb5796c3056bf28312f467af266d7b0c6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31270 keys | 2560 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 31250 keys | 2560 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 31314 keys | 2560 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 31250 keys | 2560 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 24981 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 7 masters.
12.21 keys per slot on average.
 
total slots: 16384
Removing node 9f9a851bb5796c3056bf28312f467af266d7b0c6 from cluster 172.31.5.19:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 512, 512, 512, 512 ] }
[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.37', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31270 keys | 2560 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37526 keys | 3072 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 31314 keys | 2560 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 31250 keys | 2560 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 18705 keys | 1536 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 7 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.95', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31270 keys | 2560 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37526 keys | 3072 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 31314 keys | 2560 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 37471 keys | 3072 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 12484 keys | 1024 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 7 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.102', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31270 keys | 2560 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37526 keys | 3072 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37598 keys | 3072 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 37471 keys | 3072 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 6200 keys | 512 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 7 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.126', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 37470 keys | 3072 slots | 1 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37526 keys | 3072 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37598 keys | 3072 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 37471 keys | 3072 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 6 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.219:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.219:6379 3e541625da6933354ce565dbcf61d9a7a9142dbd
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 37470 keys | 3072 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37526 keys | 3072 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37598 keys | 3072 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 37471 keys | 3072 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 24995 keys | 2048 slots | 0 slaves.
[OK] 200000 keys in 6 masters.
12.21 keys per slot on average.
 
total slots: 16384
Removing node 3e541625da6933354ce565dbcf61d9a7a9142dbd from cluster 172.31.5.219:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 512, 512, 512, 512 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 37470 keys | 3072 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37526 keys | 3072 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37598 keys | 3072 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43674 keys | 3584 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 18792 keys | 1536 slots | 0 slaves.
[OK] 200000 keys in 6 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.102', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 37470 keys | 3072 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37526 keys | 3072 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 43865 keys | 3584 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43674 keys | 3584 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 12525 keys | 1024 slots | 0 slaves.
[OK] 200000 keys in 6 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 43792 keys | 3584 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37526 keys | 3072 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 43865 keys | 3584 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43674 keys | 3584 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 6203 keys | 512 slots | 0 slaves.
[OK] 200000 keys in 6 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 43792 keys | 3584 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 43729 keys | 3584 slots | 1 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 43865 keys | 3584 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43674 keys | 3584 slots | 0 slaves.
[OK] 200000 keys in 5 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 43792 keys | 3584 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 24940 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 43729 keys | 3584 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 43865 keys | 3584 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43674 keys | 3584 slots | 0 slaves.
[OK] 200000 keys in 5 masters.
12.21 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 512, 512, 512, 512 ] }
[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.102', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 43792 keys | 3584 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 18762 keys | 1536 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 43729 keys | 3584 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50043 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43674 keys | 3584 slots | 0 slaves.
[OK] 200000 keys in 5 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.126', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50150 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 12404 keys | 1024 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 43729 keys | 3584 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50043 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43674 keys | 3584 slots | 0 slaves.
[OK] 200000 keys in 5 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.37', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50150 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 6171 keys | 512 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49962 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50043 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43674 keys | 3584 slots | 0 slaves.
[OK] 200000 keys in 5 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.95', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50150 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49962 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50043 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49845 keys | 4096 slots | 1 slaves.
[OK] 200000 keys in 4 masters.
12.21 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.71:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.71:6379 6dcb7deea231e46f1e159b044f79761c38216436
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50150 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49962 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50043 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49845 keys | 4096 slots | 0 slaves.
[OK] 200000 keys in 4 masters.
12.21 keys per slot on average.
 
total slots: 16384
Removing node 6dcb7deea231e46f1e159b044f79761c38216436 from cluster 172.31.5.71:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 50150 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49962 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50043 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 49845 keys | 4096 slots | 0 slaves.
[OK] 200000 keys in 4 masters.
12.21 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 62706 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62442 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62597 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62255 keys | 4096 slots | 0 slaves.
[OK] 250000 keys in 4 masters.
15.26 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 4 }
[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 62706 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62442 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62597 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62255 keys | 4096 slots | 0 slaves.
[OK] 250000 keys in 5 masters.
15.26 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 62706 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62442 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62597 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62255 keys | 4096 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 250000 keys in 6 masters.
15.26 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 62706 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62442 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62597 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62255 keys | 4096 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 250000 keys in 7 masters.
15.26 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.19:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.19:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 62706 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62442 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62597 keys | 4096 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62255 keys | 4096 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 250000 keys in 8 masters.
15.26 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.71:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.71:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 31430 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 31276 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 31239 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 31430 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 31203 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 31264 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 30991 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 31167 keys | 2048 slots | 0 slaves.
[OK] 250000 keys in 8 masters.
15.26 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 37760 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 37497 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37505 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37679 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 37484 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 37541 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 37159 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 8 masters.
18.31 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.19:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.19:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 37760 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 37497 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37505 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37679 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 37484 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 37541 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 37159 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 8 masters.
18.31 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 410, 410, 410, 409, 409 ] }
[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.126', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 37497 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 37505 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37679 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 30004 keys | 1638 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 37541 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 37159 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 8 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.37', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 37497 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 44988 keys | 2458 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37679 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 22521 keys | 1228 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 37541 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 37159 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 8 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.95', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 37497 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 44988 keys | 2458 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 37679 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 14918 keys | 818 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 45144 keys | 2458 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 37159 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 8 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.102', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 37497 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 44988 keys | 2458 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 45214 keys | 2457 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 7383 keys | 409 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 45144 keys | 2458 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 37159 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 8 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.71', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 44880 keys | 2457 slots | 1 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 44988 keys | 2458 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 45214 keys | 2457 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 45144 keys | 2458 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 37159 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 7 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.19:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.19:6379 9f9a851bb5796c3056bf28312f467af266d7b0c6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 44880 keys | 2457 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 44988 keys | 2458 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 45214 keys | 2457 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 45144 keys | 2458 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 37159 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 7 masters.
18.31 keys per slot on average.
 
total slots: 16384
Removing node 9f9a851bb5796c3056bf28312f467af266d7b0c6 from cluster 172.31.5.19:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 410, 410, 410, 409, 409 ] }
[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.37', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 44880 keys | 2457 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 45214 keys | 2457 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 45144 keys | 2458 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 29706 keys | 1638 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 7 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.95', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 44880 keys | 2457 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 45214 keys | 2457 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 52567 keys | 2868 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 22283 keys | 1228 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 7 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.102', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 44880 keys | 2457 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 52691 keys | 2867 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 52567 keys | 2868 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 14806 keys | 818 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 7 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.71', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 45240 keys | 2458 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52279 keys | 2866 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 52691 keys | 2867 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 52567 keys | 2868 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 7407 keys | 409 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 7 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.126', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 52647 keys | 2867 slots | 1 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52279 keys | 2866 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 52691 keys | 2867 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 52567 keys | 2868 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 6 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.219:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.219:6379 3e541625da6933354ce565dbcf61d9a7a9142dbd
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 52647 keys | 2867 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52279 keys | 2866 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 52691 keys | 2867 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 52567 keys | 2868 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 37375 keys | 2048 slots | 0 slaves.
[OK] 300000 keys in 6 masters.
18.31 keys per slot on average.
 
total slots: 16384
Removing node 3e541625da6933354ce565dbcf61d9a7a9142dbd from cluster 172.31.5.219:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 410, 410, 410, 409, 409 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 52647 keys | 2867 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52279 keys | 2866 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 52691 keys | 2867 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 59981 keys | 3278 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 29961 keys | 1638 slots | 0 slaves.
[OK] 300000 keys in 6 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.102', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 52647 keys | 2867 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52279 keys | 2866 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 60197 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 59981 keys | 3278 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 22455 keys | 1228 slots | 0 slaves.
[OK] 300000 keys in 6 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.71', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 52647 keys | 2867 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 59717 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 60197 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 59981 keys | 3278 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 15017 keys | 818 slots | 0 slaves.
[OK] 300000 keys in 6 masters.
18.31 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 409 }
assertion error.
 {
  keys1: 300000,
  keys2: 240255,
  keys: 0,
  slots1: 16384,
  slots2: 16384,
  nodes1: 6,
  nodes2: 6,
  nodes: 0
}
precheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 52647 keys | 2867 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 59717 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 60197 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 59981 keys | 3278 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 15017 keys | 818 slots | 0 slaves.
[OK] 300000 keys in 6 masters.
18.31 keys per slot on average.

postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 394 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 59717 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 52441 keys | 2868 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 60197 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 59981 keys | 3278 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 7525 keys | 409 slots | 0 slaves.
[OK] 240255 keys in 6 masters.
14.66 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 394 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 59717 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 59966 keys | 3277 slots | 1 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 60197 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 59981 keys | 3278 slots | 0 slaves.
[OK] 240255 keys in 5 masters.
14.66 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 394 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 59717 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 59966 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 60197 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 59981 keys | 3278 slots | 0 slaves.
[OK] 240255 keys in 5 masters.
14.66 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 394 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 59717 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 59966 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 60197 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 59981 keys | 3278 slots | 0 slaves.
[OK] 240255 keys in 5 masters.
14.66 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 10345 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 69785 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 69962 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 70118 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 70045 keys | 3278 slots | 0 slaves.
[OK] 290255 keys in 5 masters.
17.72 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 5 }
[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 10345 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 69785 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 69962 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 70118 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 70045 keys | 3278 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 290255 keys in 6 masters.
17.72 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 10345 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 69785 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 69962 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 70118 keys | 3277 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 70045 keys | 3278 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 290255 keys in 7 masters.
17.72 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.19:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.19:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 10345 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 69785 keys | 3276 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 69962 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 70118 keys | 3277 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 70045 keys | 3278 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 290255 keys in 8 masters.
17.72 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.73:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.73:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 6195 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 43581 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 43740 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 43833 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 21606 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 43806 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 43738 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 43756 keys | 2048 slots | 0 slaves.
[OK] 290255 keys in 8 masters.
17.72 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 12477 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 49826 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49990 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50129 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 27777 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 50029 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 50040 keys | 2048 slots | 0 slaves.
[OK] 340255 keys in 8 masters.
20.77 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.19:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.19:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 12477 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 49826 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49990 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50129 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 27777 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 50029 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 50040 keys | 2048 slots | 0 slaves.
[OK] 340255 keys in 8 masters.
20.77 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 342, 342, 341, 341, 341, 341 ] }
[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.126', slots: 342 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 49826 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 49990 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50129 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 22549 keys | 1706 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 50029 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 50040 keys | 2048 slots | 0 slaves.
[OK] 340255 keys in 8 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.37', slots: 342 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 49826 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 54294 keys | 2390 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50129 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 18245 keys | 1364 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 50029 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 50040 keys | 2048 slots | 0 slaves.
[OK] 340255 keys in 8 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.95', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 49826 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 54294 keys | 2390 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50129 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 9980 keys | 1023 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 58294 keys | 2389 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 50040 keys | 2048 slots | 0 slaves.
[OK] 340255 keys in 8 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.102', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 49826 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 54294 keys | 2390 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 55337 keys | 2389 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 4772 keys | 682 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 58294 keys | 2389 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 50040 keys | 2048 slots | 0 slaves.
[OK] 340255 keys in 8 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.71', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52516 keys | 2389 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 54294 keys | 2390 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 55337 keys | 2389 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 2082 keys | 341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 58294 keys | 2389 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 50040 keys | 2048 slots | 0 slaves.
[OK] 340255 keys in 8 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.73 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.73', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52516 keys | 2389 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 54294 keys | 2390 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 55337 keys | 2389 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 58294 keys | 2389 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 52122 keys | 2389 slots | 1 slaves.
[OK] 340255 keys in 7 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.19:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.19:6379 9f9a851bb5796c3056bf28312f467af266d7b0c6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52516 keys | 2389 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 54294 keys | 2390 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 55337 keys | 2389 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 58294 keys | 2389 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49987 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 52122 keys | 2389 slots | 0 slaves.
[OK] 340255 keys in 7 masters.
20.77 keys per slot on average.
 
total slots: 16384
Removing node 9f9a851bb5796c3056bf28312f467af266d7b0c6 from cluster 172.31.5.19:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 342, 342, 341, 341, 341, 341 ] }
[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.37', slots: 342 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52516 keys | 2389 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62667 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 55337 keys | 2389 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 58294 keys | 2389 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 41614 keys | 1706 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 52122 keys | 2389 slots | 0 slaves.
[OK] 340255 keys in 7 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.95', slots: 342 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52516 keys | 2389 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62667 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 55337 keys | 2389 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 66649 keys | 2731 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 33259 keys | 1364 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 52122 keys | 2389 slots | 0 slaves.
[OK] 340255 keys in 7 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.102', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 52516 keys | 2389 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62667 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 63606 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 66649 keys | 2731 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 24990 keys | 1023 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 52122 keys | 2389 slots | 0 slaves.
[OK] 340255 keys in 7 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.71', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 60827 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62667 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 63606 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 66649 keys | 2731 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 16679 keys | 682 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 52122 keys | 2389 slots | 0 slaves.
[OK] 340255 keys in 7 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.73 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.73', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 17705 keys | 2390 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 60827 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62667 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 63606 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 66649 keys | 2731 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 8386 keys | 341 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 60415 keys | 2730 slots | 0 slaves.
[OK] 340255 keys in 7 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.126', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 26091 keys | 2731 slots | 1 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 60827 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62667 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 63606 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 66649 keys | 2731 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 60415 keys | 2730 slots | 0 slaves.
[OK] 340255 keys in 6 masters.
20.77 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.219:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.219:6379 3e541625da6933354ce565dbcf61d9a7a9142dbd
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 26091 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 60827 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62667 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 63606 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 66649 keys | 2731 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 60415 keys | 2730 slots | 0 slaves.
[OK] 340255 keys in 6 masters.
20.77 keys per slot on average.
 
total slots: 16384
Removing node 3e541625da6933354ce565dbcf61d9a7a9142dbd from cluster 172.31.5.219:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 26091 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 60827 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62667 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 63606 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 66649 keys | 2731 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 60415 keys | 2730 slots | 0 slaves.
[OK] 340255 keys in 6 masters.
20.77 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 34436 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 69121 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71056 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 71916 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 74987 keys | 2731 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 68739 keys | 2730 slots | 0 slaves.
[OK] 390255 keys in 6 masters.
23.82 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 6 }
[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 34436 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 69121 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71056 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 71916 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 74987 keys | 2731 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 68739 keys | 2730 slots | 0 slaves.
[OK] 390255 keys in 7 masters.
23.82 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.19:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.19:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 34436 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 69121 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71056 keys | 2732 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 71916 keys | 2730 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 74987 keys | 2731 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 68739 keys | 2730 slots | 0 slaves.
[OK] 390255 keys in 8 masters.
23.82 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.219:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.219:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 18747 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 54790 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 56261 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 56362 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 48638 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 56299 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 49108 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 50050 keys | 2048 slots | 0 slaves.
[OK] 390255 keys in 8 masters.
23.82 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 24953 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 61061 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62503 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62611 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 54914 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62577 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 55334 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 56302 keys | 2048 slots | 0 slaves.
[OK] 440255 keys in 8 masters.
26.87 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.19:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.19:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 24953 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 61061 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62503 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62611 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 54914 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62577 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 55334 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 56302 keys | 2048 slots | 0 slaves.
[OK] 440255 keys in 8 masters.
26.87 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [
    293, 293, 293,
    293, 292, 292,
    292
  ] }
[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.126', slots: 293 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 61061 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 62503 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62611 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 46007 keys | 1755 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62577 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 55334 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 56302 keys | 2048 slots | 0 slaves.
[OK] 440255 keys in 8 masters.
26.87 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.37', slots: 293 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 61061 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71394 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62611 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 37116 keys | 1462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 62577 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 55334 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 56302 keys | 2048 slots | 0 slaves.
[OK] 440255 keys in 8 masters.
26.87 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.95', slots: 293 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 61061 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71394 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 62611 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 28598 keys | 1169 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 71095 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 55334 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 56302 keys | 2048 slots | 0 slaves.
[OK] 440255 keys in 8 masters.
26.87 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.102', slots: 293 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 61061 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71394 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 68944 keys | 2341 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 22265 keys | 876 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 71095 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 55334 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 56302 keys | 2048 slots | 0 slaves.
[OK] 440255 keys in 8 masters.
26.87 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.71', slots: 292 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 68237 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71394 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 68944 keys | 2341 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 15089 keys | 584 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 71095 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 55334 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 56302 keys | 2048 slots | 0 slaves.
[OK] 440255 keys in 8 masters.
26.87 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.73 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.73', slots: 292 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 68237 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71394 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 68944 keys | 2341 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 8827 keys | 292 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 71095 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 55334 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 62564 keys | 2340 slots | 0 slaves.
[OK] 440255 keys in 8 masters.
26.87 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.19 TO 172.31.5.219 ###
[0m
{ reshardFrom: '172.31.5.19', reshardTo: '172.31.5.219', slots: 292 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 68237 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71394 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 68944 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 71095 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 64161 keys | 2340 slots | 1 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 62564 keys | 2340 slots | 0 slaves.
[OK] 440255 keys in 7 masters.
26.87 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.19:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.19:6379 9f9a851bb5796c3056bf28312f467af266d7b0c6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 68237 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71394 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 68944 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 71095 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 64161 keys | 2340 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 62564 keys | 2340 slots | 0 slaves.
[OK] 440255 keys in 7 masters.
26.87 keys per slot on average.
 
total slots: 16384
Removing node 9f9a851bb5796c3056bf28312f467af266d7b0c6 from cluster 172.31.5.19:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 33860 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 68237 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 71394 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 68944 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 71095 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 64161 keys | 2340 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 62564 keys | 2340 slots | 0 slaves.
[OK] 440255 keys in 7 masters.
26.87 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 41025 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 78521 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 78249 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 71321 keys | 2340 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 69704 keys | 2340 slots | 0 slaves.
[OK] 490255 keys in 7 masters.
29.92 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 7 }
[33m### REBALANCING CLUSTER ON 172.31.5.219:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.219:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 41025 keys | 2341 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 78521 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 78249 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 71321 keys | 2340 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 69704 keys | 2340 slots | 0 slaves.
[OK] 490255 keys in 7 masters.
29.92 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 780, 780, 780 ] }
[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.126', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 67229 keys | 3121 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 78521 keys | 2341 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 78249 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 45117 keys | 1560 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 69704 keys | 2340 slots | 0 slaves.
[OK] 490255 keys in 7 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.37', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 67229 keys | 3121 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 97477 keys | 3121 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 78249 keys | 2341 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 26161 keys | 780 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 69704 keys | 2340 slots | 0 slaves.
[OK] 490255 keys in 7 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.95', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 67229 keys | 3121 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 97477 keys | 3121 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 104410 keys | 3121 slots | 1 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 69704 keys | 2340 slots | 0 slaves.
[OK] 490255 keys in 6 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.219:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.219:6379 3e541625da6933354ce565dbcf61d9a7a9142dbd
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 67229 keys | 3121 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 97477 keys | 3121 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 104410 keys | 3121 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 69704 keys | 2340 slots | 0 slaves.
[OK] 490255 keys in 6 masters.
29.92 keys per slot on average.
 
total slots: 16384
Removing node 3e541625da6933354ce565dbcf61d9a7a9142dbd from cluster 172.31.5.219:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 780, 780, 780 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 67229 keys | 3121 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121142 keys | 3901 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 104410 keys | 3121 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 46039 keys | 1560 slots | 0 slaves.
[OK] 490255 keys in 6 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 67229 keys | 3121 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121142 keys | 3901 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 130529 keys | 3901 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 19920 keys | 780 slots | 0 slaves.
[OK] 490255 keys in 6 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 87149 keys | 3901 slots | 1 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121142 keys | 3901 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 130529 keys | 3901 slots | 0 slaves.
[OK] 490255 keys in 5 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 87149 keys | 3901 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 75293 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121142 keys | 3901 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 130529 keys | 3901 slots | 0 slaves.
[OK] 490255 keys in 5 masters.
29.92 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 780, 780, 780 ] }
[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.95', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 87149 keys | 3901 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 50825 keys | 1560 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121142 keys | 3901 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 154997 keys | 4681 slots | 0 slaves.
[OK] 490255 keys in 5 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.126', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 112061 keys | 4681 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 25913 keys | 780 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121142 keys | 3901 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 154997 keys | 4681 slots | 0 slaves.
[OK] 490255 keys in 5 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.37', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 112061 keys | 4681 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 147055 keys | 4681 slots | 1 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 154997 keys | 4681 slots | 0 slaves.
[OK] 490255 keys in 4 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.71:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.71:6379 6dcb7deea231e46f1e159b044f79761c38216436
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 112061 keys | 4681 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 147055 keys | 4681 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 76142 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 154997 keys | 4681 slots | 0 slaves.
[OK] 490255 keys in 4 masters.
29.92 keys per slot on average.
 
total slots: 16384
Removing node 6dcb7deea231e46f1e159b044f79761c38216436 from cluster 172.31.5.71:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 781, 780, 780 ] }
[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.126', slots: 781 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 135751 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 147055 keys | 4681 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 52452 keys | 1560 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 154997 keys | 4681 slots | 0 slaves.
[OK] 490255 keys in 4 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.37', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 135751 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 173349 keys | 5461 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 26158 keys | 780 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 154997 keys | 4681 slots | 0 slaves.
[OK] 490255 keys in 4 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.95', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 135751 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 173349 keys | 5461 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 181155 keys | 5461 slots | 1 slaves.
[OK] 490255 keys in 3 masters.
29.92 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.102:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.102:6379 d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 135751 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 173349 keys | 5461 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 181155 keys | 5461 slots | 0 slaves.
[OK] 490255 keys in 3 masters.
29.92 keys per slot on average.
 
total slots: 16384
Removing node d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f from cluster 172.31.5.102:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 135751 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 173349 keys | 5461 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 181155 keys | 5461 slots | 0 slaves.
[OK] 490255 keys in 3 masters.
29.92 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 152366 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 190065 keys | 5461 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 197824 keys | 5461 slots | 0 slaves.
[OK] 540255 keys in 3 masters.
32.97 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.102:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.102:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 152366 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 190065 keys | 5461 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 197824 keys | 5461 slots | 0 slaves.
[OK] 540255 keys in 4 masters.
32.97 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 152366 keys | 5462 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 190065 keys | 5461 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 197824 keys | 5461 slots | 0 slaves.
[OK] 540255 keys in 5 masters.
32.97 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 152366 keys | 5462 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 190065 keys | 5461 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 197824 keys | 5461 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 540255 keys in 6 masters.
32.97 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 152366 keys | 5462 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 190065 keys | 5461 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 197824 keys | 5461 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 540255 keys in 7 masters.
32.97 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.102:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.102:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 47334 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 83543 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 85641 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 83022 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 85748 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 85718 keys | 2341 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 69249 keys | 2341 slots | 0 slaves.
[OK] 540255 keys in 7 masters.
32.97 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 7 nodes. Total weight = 7.00



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 54519 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 92749 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 90183 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 92915 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 92874 keys | 2341 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 76321 keys | 2341 slots | 0 slaves.
[OK] 590255 keys in 7 masters.
36.03 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 7 }
[33m### REBALANCING CLUSTER ON 172.31.5.219:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.219:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 54519 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 92749 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 90183 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 92915 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 92874 keys | 2341 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 76321 keys | 2341 slots | 0 slaves.
[OK] 590255 keys in 7 masters.
36.03 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 586, 585, 585, 585 ] }
[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.126', slots: 586 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77640 keys | 2926 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 92749 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 90183 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 92915 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 69753 keys | 1755 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 76321 keys | 2341 slots | 0 slaves.
[OK] 590255 keys in 7 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.37', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77640 keys | 2926 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 116062 keys | 2925 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 90183 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 92915 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 46440 keys | 1170 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 76321 keys | 2341 slots | 0 slaves.
[OK] 590255 keys in 7 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.95', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77640 keys | 2926 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 116062 keys | 2925 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 90183 keys | 2341 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 116064 keys | 2925 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 23291 keys | 585 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 76321 keys | 2341 slots | 0 slaves.
[OK] 590255 keys in 7 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.102', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77640 keys | 2926 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 116062 keys | 2925 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 113474 keys | 2926 slots | 1 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 116064 keys | 2925 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 76321 keys | 2341 slots | 0 slaves.
[OK] 590255 keys in 6 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.219:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.219:6379 3e541625da6933354ce565dbcf61d9a7a9142dbd
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77640 keys | 2926 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 116062 keys | 2925 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 113474 keys | 2926 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 116064 keys | 2925 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 76321 keys | 2341 slots | 0 slaves.
[OK] 590255 keys in 6 masters.
36.03 keys per slot on average.
 
total slots: 16384
Removing node 3e541625da6933354ce565dbcf61d9a7a9142dbd from cluster 172.31.5.219:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 586, 585, 585, 585 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 586 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77640 keys | 2926 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 134458 keys | 3511 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 113474 keys | 2926 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 116064 keys | 2925 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 57925 keys | 1755 slots | 0 slaves.
[OK] 590255 keys in 6 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77640 keys | 2926 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 134458 keys | 3511 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 113474 keys | 2926 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 135017 keys | 3510 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 38972 keys | 1170 slots | 0 slaves.
[OK] 590255 keys in 6 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.102', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77640 keys | 2926 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 134458 keys | 3511 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 135923 keys | 3511 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 135017 keys | 3510 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 16523 keys | 585 slots | 0 slaves.
[OK] 590255 keys in 6 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 94163 keys | 3511 slots | 1 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 134458 keys | 3511 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 135923 keys | 3511 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 135017 keys | 3510 slots | 0 slaves.
[OK] 590255 keys in 5 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 94163 keys | 3511 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 90694 keys | 2341 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 134458 keys | 3511 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 135923 keys | 3511 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 135017 keys | 3510 slots | 0 slaves.
[OK] 590255 keys in 5 masters.
36.03 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 586, 585, 585, 585 ] }
[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.95', slots: 586 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 94163 keys | 3511 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 67889 keys | 1755 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 134458 keys | 3511 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 135923 keys | 3511 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 157822 keys | 4096 slots | 0 slaves.
[OK] 590255 keys in 5 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.102', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 94163 keys | 3511 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 46264 keys | 1170 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 134458 keys | 3511 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157548 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 157822 keys | 4096 slots | 0 slaves.
[OK] 590255 keys in 5 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.126', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 117357 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 23070 keys | 585 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 134458 keys | 3511 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157548 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 157822 keys | 4096 slots | 0 slaves.
[OK] 590255 keys in 5 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.37', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 117357 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 157528 keys | 4096 slots | 1 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157548 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 157822 keys | 4096 slots | 0 slaves.
[OK] 590255 keys in 4 masters.
36.03 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.71:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.71:6379 6dcb7deea231e46f1e159b044f79761c38216436
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 117357 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 157528 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157548 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 157822 keys | 4096 slots | 0 slaves.
[OK] 590255 keys in 4 masters.
36.03 keys per slot on average.
 
total slots: 16384
Removing node 6dcb7deea231e46f1e159b044f79761c38216436 from cluster 172.31.5.71:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 117357 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 157528 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157548 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 157822 keys | 4096 slots | 0 slaves.
[OK] 590255 keys in 4 masters.
36.03 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 129849 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 170046 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 170078 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 170282 keys | 4096 slots | 0 slaves.
[OK] 640255 keys in 4 masters.
39.08 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 4 }
[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 129849 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 170046 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 170078 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 170282 keys | 4096 slots | 0 slaves.
[OK] 640255 keys in 5 masters.
39.08 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 129849 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 170046 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 170078 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 170282 keys | 4096 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 640255 keys in 6 masters.
39.08 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 129849 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 170046 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 170078 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 170282 keys | 4096 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 640255 keys in 7 masters.
39.08 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.71:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.71:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 70498 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 84295 keys | 2342 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 99896 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 100215 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 100025 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 95129 keys | 2341 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 90197 keys | 2341 slots | 0 slaves.
[OK] 640255 keys in 7 masters.
39.08 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 7 nodes. Total weight = 7.00



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77624 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 91435 keys | 2342 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 107050 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 107332 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 107153 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 102282 keys | 2341 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 97379 keys | 2341 slots | 0 slaves.
[OK] 690255 keys in 7 masters.
42.13 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 7 }
[33m### REBALANCING CLUSTER ON 172.31.5.219:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.219:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 77624 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 91435 keys | 2342 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 107050 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 107332 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 107153 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 102282 keys | 2341 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 97379 keys | 2341 slots | 0 slaves.
[OK] 690255 keys in 7 masters.
42.13 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 469, 468, 468, 468, 468 ] }
[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.126', slots: 469 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 91435 keys | 2342 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 107050 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 107332 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 107153 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 83169 keys | 1872 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 97379 keys | 2341 slots | 0 slaves.
[OK] 690255 keys in 7 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.37', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 91435 keys | 2342 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 127974 keys | 2808 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 107332 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 107153 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 62245 keys | 1404 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 97379 keys | 2341 slots | 0 slaves.
[OK] 690255 keys in 7 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.95', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 91435 keys | 2342 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 127974 keys | 2808 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 107332 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 126663 keys | 2808 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 42735 keys | 936 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 97379 keys | 2341 slots | 0 slaves.
[OK] 690255 keys in 7 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.102', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 91435 keys | 2342 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 127974 keys | 2808 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 128726 keys | 2808 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 126663 keys | 2808 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 21341 keys | 468 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 97379 keys | 2341 slots | 0 slaves.
[OK] 690255 keys in 7 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.71', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 112776 keys | 2810 slots | 1 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 127974 keys | 2808 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 128726 keys | 2808 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 126663 keys | 2808 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 97379 keys | 2341 slots | 0 slaves.
[OK] 690255 keys in 6 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.219:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.219:6379 3e541625da6933354ce565dbcf61d9a7a9142dbd
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 112776 keys | 2810 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 127974 keys | 2808 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 128726 keys | 2808 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 126663 keys | 2808 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 97379 keys | 2341 slots | 0 slaves.
[OK] 690255 keys in 6 masters.
42.13 keys per slot on average.
 
total slots: 16384
Removing node 3e541625da6933354ce565dbcf61d9a7a9142dbd from cluster 172.31.5.219:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 469, 468, 468, 468, 468 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 469 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 112776 keys | 2810 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 149556 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 128726 keys | 2808 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 126663 keys | 2808 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 75797 keys | 1872 slots | 0 slaves.
[OK] 690255 keys in 6 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 112776 keys | 2810 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 149556 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 128726 keys | 2808 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 145690 keys | 3276 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 56770 keys | 1404 slots | 0 slaves.
[OK] 690255 keys in 6 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.102', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 112776 keys | 2810 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 149556 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 145136 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 145690 keys | 3276 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 40360 keys | 936 slots | 0 slaves.
[OK] 690255 keys in 6 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.71', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 96737 keys | 2809 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 131607 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 149556 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 145136 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 145690 keys | 3276 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 21529 keys | 468 slots | 0 slaves.
[OK] 690255 keys in 6 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 118266 keys | 3277 slots | 1 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 131607 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 149556 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 145136 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 145690 keys | 3276 slots | 0 slaves.
[OK] 690255 keys in 5 masters.
42.13 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 118266 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 131607 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 149556 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 145136 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 145690 keys | 3276 slots | 0 slaves.
[OK] 690255 keys in 5 masters.
42.13 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 118266 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 131607 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 149556 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 145136 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 145690 keys | 3276 slots | 0 slaves.
[OK] 690255 keys in 5 masters.
42.13 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 128383 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 141579 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 159494 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 155200 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 155599 keys | 3276 slots | 0 slaves.
[OK] 740255 keys in 5 masters.
45.18 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 5 }
[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 128383 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 141579 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 159494 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 155200 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 155599 keys | 3276 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 740255 keys in 6 masters.
45.18 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 128383 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 141579 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 159494 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 155200 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 155599 keys | 3276 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 740255 keys in 7 masters.
45.18 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.73:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.73:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 84808 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 98432 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 114159 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 114375 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 114274 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 105239 keys | 2342 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 108968 keys | 2342 slots | 0 slaves.
[OK] 740255 keys in 7 masters.
45.18 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 7 nodes. Total weight = 7.00



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 92007 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 105597 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121303 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 121507 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 121363 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 112413 keys | 2342 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 116065 keys | 2342 slots | 0 slaves.
[OK] 790255 keys in 7 masters.
48.23 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 7 }
[33m### REBALANCING CLUSTER ON 172.31.5.219:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.219:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 92007 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 105597 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121303 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 121507 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 121363 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 112413 keys | 2342 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 116065 keys | 2342 slots | 0 slaves.
[OK] 790255 keys in 7 masters.
48.23 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 391, 391, 390, 390, 390, 390 ] }
[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.126', slots: 391 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 111345 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 105597 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 121303 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 121507 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 121363 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 93075 keys | 1951 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 116065 keys | 2342 slots | 0 slaves.
[OK] 790255 keys in 7 masters.
48.23 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.37', slots: 391 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 111345 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 105597 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 135078 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 121507 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 121363 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 79300 keys | 1560 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 116065 keys | 2342 slots | 0 slaves.
[OK] 790255 keys in 7 masters.
48.23 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.95', slots: 390 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 111345 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 105597 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 135078 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 121507 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 139801 keys | 2730 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 60862 keys | 1170 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 116065 keys | 2342 slots | 0 slaves.
[OK] 790255 keys in 7 masters.
48.23 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.102', slots: 390 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 111345 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 105597 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 135078 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 141861 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 139801 keys | 2730 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 40508 keys | 780 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 116065 keys | 2342 slots | 0 slaves.
[OK] 790255 keys in 7 masters.
48.23 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.71', slots: 390 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 111345 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 125926 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 135078 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 141861 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 139801 keys | 2730 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 20179 keys | 390 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 116065 keys | 2342 slots | 0 slaves.
[OK] 790255 keys in 7 masters.
48.23 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.219 TO 172.31.5.73 ###
[0m
{ reshardFrom: '172.31.5.219', reshardTo: '172.31.5.73', slots: 390 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 111345 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 125926 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 135078 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 141861 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 139801 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 136244 keys | 2732 slots | 1 slaves.
[OK] 790255 keys in 6 masters.
48.23 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.219:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.219:6379 3e541625da6933354ce565dbcf61d9a7a9142dbd
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 111345 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 125926 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 135078 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 141861 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 139801 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 136244 keys | 2732 slots | 0 slaves.
[OK] 790255 keys in 6 masters.
48.23 keys per slot on average.
 
total slots: 16384
Removing node 3e541625da6933354ce565dbcf61d9a7a9142dbd from cluster 172.31.5.219:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 111345 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 125926 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 135078 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 141861 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 139801 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 136244 keys | 2732 slots | 0 slaves.
[OK] 790255 keys in 6 masters.
48.23 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 119667 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 134206 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 143423 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 148101 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 144622 keys | 2732 slots | 0 slaves.
[OK] 840255 keys in 6 masters.
51.29 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 6 }
[33m### REBALANCING CLUSTER ON 172.31.5.73:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.73:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 119667 keys | 2731 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 134206 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 143423 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 148101 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 144622 keys | 2732 slots | 0 slaves.
[OK] 840255 keys in 6 masters.
51.29 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 911, 911, 910 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 911 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 169627 keys | 3642 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 134206 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 143423 keys | 2731 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 148101 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 94662 keys | 1821 slots | 0 slaves.
[OK] 840255 keys in 6 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 911 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 169627 keys | 3642 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 134206 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 191178 keys | 3642 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 148101 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 46907 keys | 910 slots | 0 slaves.
[OK] 840255 keys in 6 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 169627 keys | 3642 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 134206 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 191178 keys | 3642 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 195008 keys | 3640 slots | 1 slaves.
[OK] 840255 keys in 5 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 169627 keys | 3642 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 134206 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 191178 keys | 3642 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 195008 keys | 3640 slots | 0 slaves.
[OK] 840255 keys in 5 masters.
51.29 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 910, 910, 910 ] }
[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.37', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 169627 keys | 3642 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 84344 keys | 1820 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 241040 keys | 4552 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 195008 keys | 3640 slots | 0 slaves.
[OK] 840255 keys in 5 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.95', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 169627 keys | 3642 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 43556 keys | 910 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 241040 keys | 4552 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 235796 keys | 4550 slots | 0 slaves.
[OK] 840255 keys in 5 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.126', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 213183 keys | 4552 slots | 1 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 241040 keys | 4552 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 235796 keys | 4550 slots | 0 slaves.
[OK] 840255 keys in 4 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.71:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.71:6379 6dcb7deea231e46f1e159b044f79761c38216436
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 213183 keys | 4552 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 241040 keys | 4552 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 150236 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 235796 keys | 4550 slots | 0 slaves.
[OK] 840255 keys in 4 masters.
51.29 keys per slot on average.
 
total slots: 16384
Removing node 6dcb7deea231e46f1e159b044f79761c38216436 from cluster 172.31.5.71:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 910, 910, 910 ] }
[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.95', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 213183 keys | 4552 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 241040 keys | 4552 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 100121 keys | 1820 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 285911 keys | 5460 slots | 0 slaves.
[OK] 840255 keys in 4 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.126', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 263166 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 241040 keys | 4552 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 50138 keys | 910 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 285911 keys | 5460 slots | 0 slaves.
[OK] 840255 keys in 4 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.37', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 263166 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 291178 keys | 5462 slots | 1 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 285911 keys | 5460 slots | 0 slaves.
[OK] 840255 keys in 3 masters.
51.29 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.102:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.102:6379 d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 263166 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 291178 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 285911 keys | 5460 slots | 0 slaves.
[OK] 840255 keys in 3 masters.
51.29 keys per slot on average.
 
total slots: 16384
Removing node d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f from cluster 172.31.5.102:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 263166 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 291178 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 285911 keys | 5460 slots | 0 slaves.
[OK] 840255 keys in 3 masters.
51.29 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 279794 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 307818 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 302643 keys | 5460 slots | 0 slaves.
[OK] 890255 keys in 3 masters.
54.34 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.102:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.102:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 279794 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 307818 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 302643 keys | 5460 slots | 0 slaves.
[OK] 890255 keys in 4 masters.
54.34 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 279794 keys | 5462 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 307818 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 302643 keys | 5460 slots | 0 slaves.
[OK] 890255 keys in 5 masters.
54.34 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 279794 keys | 5462 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 307818 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 302643 keys | 5460 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 890255 keys in 6 masters.
54.34 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.102:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.102:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 128767 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 151498 keys | 2731 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 158276 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 149542 keys | 2732 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 151195 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 150977 keys | 2731 slots | 0 slaves.
[OK] 890255 keys in 6 masters.
54.34 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 6 nodes. Total weight = 6.00



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 137092 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 159852 keys | 2731 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 166589 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157885 keys | 2732 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 159544 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 159293 keys | 2731 slots | 0 slaves.
[OK] 940255 keys in 6 masters.
57.39 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 6 }
[33m### REBALANCING CLUSTER ON 172.31.5.73:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.73:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 137092 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 159852 keys | 2731 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 166589 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157885 keys | 2732 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 159544 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 159293 keys | 2731 slots | 0 slaves.
[OK] 940255 keys in 6 masters.
57.39 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 683, 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 178678 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 159852 keys | 2731 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 166589 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157885 keys | 2732 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 159544 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 117707 keys | 2048 slots | 0 slaves.
[OK] 940255 keys in 6 masters.
57.39 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 178678 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 159852 keys | 2731 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 207362 keys | 3413 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157885 keys | 2732 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 159544 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 76934 keys | 1365 slots | 0 slaves.
[OK] 940255 keys in 6 masters.
57.39 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 178678 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 159852 keys | 2731 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 207362 keys | 3413 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 157885 keys | 2732 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 201162 keys | 3413 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 35316 keys | 682 slots | 0 slaves.
[OK] 940255 keys in 6 masters.
57.39 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.102', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 178678 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 159852 keys | 2731 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 207362 keys | 3413 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 193201 keys | 3414 slots | 1 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 201162 keys | 3413 slots | 0 slaves.
[OK] 940255 keys in 5 masters.
57.39 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 178678 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 159852 keys | 2731 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 207362 keys | 3413 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 193201 keys | 3414 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 201162 keys | 3413 slots | 0 slaves.
[OK] 940255 keys in 5 masters.
57.39 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.37', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 178678 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 122531 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 244683 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 193201 keys | 3414 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 201162 keys | 3413 slots | 0 slaves.
[OK] 940255 keys in 5 masters.
57.39 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.95', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 178678 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 81166 keys | 1365 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 244683 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 193201 keys | 3414 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 242527 keys | 4096 slots | 0 slaves.
[OK] 940255 keys in 5 masters.
57.39 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.102', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 178678 keys | 3413 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 39576 keys | 682 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 244683 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 234791 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 242527 keys | 4096 slots | 0 slaves.
[OK] 940255 keys in 5 masters.
57.39 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.126', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 218254 keys | 4095 slots | 1 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 244683 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 234791 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 242527 keys | 4096 slots | 0 slaves.
[OK] 940255 keys in 4 masters.
57.39 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.71:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.71:6379 6dcb7deea231e46f1e159b044f79761c38216436
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 218254 keys | 4095 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 244683 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 234791 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 242527 keys | 4096 slots | 0 slaves.
[OK] 940255 keys in 4 masters.
57.39 keys per slot on average.
 
total slots: 16384
Removing node 6dcb7deea231e46f1e159b044f79761c38216436 from cluster 172.31.5.71:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 218254 keys | 4095 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 244683 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 234791 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 242527 keys | 4096 slots | 0 slaves.
[OK] 940255 keys in 4 masters.
57.39 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 230741 keys | 4095 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 257158 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 247359 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 254997 keys | 4096 slots | 0 slaves.
[OK] 990255 keys in 4 masters.
60.44 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 4 }
[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 230741 keys | 4095 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 257158 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 247359 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 254997 keys | 4096 slots | 0 slaves.
[OK] 990255 keys in 5 masters.
60.44 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 230741 keys | 4095 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 257158 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 247359 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 254997 keys | 4096 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 990255 keys in 6 masters.
60.44 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.71:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.71:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 145416 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 160934 keys | 2732 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 174917 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 168612 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 167841 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 172535 keys | 2732 slots | 0 slaves.
[OK] 990255 keys in 6 masters.
60.44 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 6 nodes. Total weight = 6.00



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 153789 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 169275 keys | 2732 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 183235 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 176972 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 176159 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 180825 keys | 2732 slots | 0 slaves.
[OK] 1040255 keys in 6 masters.
63.49 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 6 }
[33m### REBALANCING CLUSTER ON 172.31.5.73:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.73:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 153789 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 169275 keys | 2732 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 183235 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 176972 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 176159 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 180825 keys | 2732 slots | 0 slaves.
[OK] 1040255 keys in 6 masters.
63.49 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 547, 547, 546, 546, 546 ] }
[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.126', slots: 547 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 190282 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 169275 keys | 2732 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 183235 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 176972 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 176159 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 144332 keys | 2185 slots | 0 slaves.
[OK] 1040255 keys in 6 masters.
63.49 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.37', slots: 547 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 190282 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 169275 keys | 2732 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 219522 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 176972 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 176159 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 108045 keys | 1638 slots | 0 slaves.
[OK] 1040255 keys in 6 masters.
63.49 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.95', slots: 546 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 190282 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 169275 keys | 2732 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 219522 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 176972 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 213111 keys | 3276 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 71093 keys | 1092 slots | 0 slaves.
[OK] 1040255 keys in 6 masters.
63.49 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.102', slots: 546 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 190282 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 169275 keys | 2732 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 219522 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 213602 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 213111 keys | 3276 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 34463 keys | 546 slots | 0 slaves.
[OK] 1040255 keys in 6 masters.
63.49 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.73 TO 172.31.5.71 ###
[0m
{ reshardFrom: '172.31.5.73', reshardTo: '172.31.5.71', slots: 546 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 190282 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 203738 keys | 3278 slots | 1 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 219522 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 213602 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 213111 keys | 3276 slots | 0 slaves.
[OK] 1040255 keys in 5 masters.
63.49 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.73:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.73:6379 7dd8a7e5571f8bc96106053a8e9a377656baa224
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 190282 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 203738 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 219522 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 213602 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 213111 keys | 3276 slots | 0 slaves.
[OK] 1040255 keys in 5 masters.
63.49 keys per slot on average.
 
total slots: 16384
Removing node 7dd8a7e5571f8bc96106053a8e9a377656baa224 from cluster 172.31.5.73:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 190282 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 203738 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 219522 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 213602 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 213111 keys | 3276 slots | 0 slaves.
[OK] 1040255 keys in 5 masters.
63.49 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 200352 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 213744 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 229510 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 223585 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 223064 keys | 3276 slots | 0 slaves.
[OK] 1090255 keys in 5 masters.
66.54 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 5 }
[33m### REBALANCING CLUSTER ON 172.31.5.71:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.71:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 200352 keys | 3277 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 213744 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 229510 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 223585 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 223064 keys | 3276 slots | 0 slaves.
[OK] 1090255 keys in 5 masters.
66.54 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 1093, 1093, 1092 ] }
[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.126', slots: 1093 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 270216 keys | 4370 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 143880 keys | 2185 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 229510 keys | 3277 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 223585 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 223064 keys | 3276 slots | 0 slaves.
[OK] 1090255 keys in 5 masters.
66.54 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.37', slots: 1093 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 270216 keys | 4370 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 70490 keys | 1092 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 302900 keys | 4370 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 223585 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 223064 keys | 3276 slots | 0 slaves.
[OK] 1090255 keys in 5 masters.
66.54 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.95', slots: 1092 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 270216 keys | 4370 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 302900 keys | 4370 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 223585 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 293554 keys | 4368 slots | 1 slaves.
[OK] 1090255 keys in 4 masters.
66.54 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.71:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.71:6379 6dcb7deea231e46f1e159b044f79761c38216436
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 270216 keys | 4370 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 302900 keys | 4370 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 223585 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 293554 keys | 4368 slots | 0 slaves.
[OK] 1090255 keys in 4 masters.
66.54 keys per slot on average.
 
total slots: 16384
Removing node 6dcb7deea231e46f1e159b044f79761c38216436 from cluster 172.31.5.71:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 1092, 1092, 1092 ] }
[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.37', slots: 1092 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 270216 keys | 4370 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 379536 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 146949 keys | 2184 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 293554 keys | 4368 slots | 0 slaves.
[OK] 1090255 keys in 4 masters.
66.54 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.95', slots: 1092 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 270216 keys | 4370 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 379536 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 70433 keys | 1092 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 370070 keys | 5460 slots | 0 slaves.
[OK] 1090255 keys in 4 masters.
66.54 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.126', slots: 1092 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 340649 keys | 5462 slots | 1 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 379536 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 370070 keys | 5460 slots | 0 slaves.
[OK] 1090255 keys in 3 masters.
66.54 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.102:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.102:6379 d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 340649 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 379536 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 370070 keys | 5460 slots | 0 slaves.
[OK] 1090255 keys in 3 masters.
66.54 keys per slot on average.
 
total slots: 16384
Removing node d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f from cluster 172.31.5.102:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 340649 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 379536 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 370070 keys | 5460 slots | 0 slaves.
[OK] 1090255 keys in 3 masters.
66.54 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 357384 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 396181 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 386690 keys | 5460 slots | 0 slaves.
[OK] 1140255 keys in 3 masters.
69.60 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.102:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.102:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 357384 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 396181 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 386690 keys | 5460 slots | 0 slaves.
[OK] 1140255 keys in 4 masters.
69.60 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 357384 keys | 5462 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 396181 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 386690 keys | 5460 slots | 0 slaves.
[OK] 1140255 keys in 5 masters.
69.60 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.102:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.102:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 207697 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 225996 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 239974 keys | 3276 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 235986 keys | 3278 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 230602 keys | 3276 slots | 0 slaves.
[OK] 1140255 keys in 5 masters.
69.60 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 5 nodes. Total weight = 5.00



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 217656 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 235974 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 249922 keys | 3276 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 246007 keys | 3278 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 240696 keys | 3276 slots | 0 slaves.
[OK] 1190255 keys in 5 masters.
72.65 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 5 }
[33m### REBALANCING CLUSTER ON 172.31.5.71:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.71:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 217656 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 235974 keys | 3278 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 249922 keys | 3276 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 246007 keys | 3278 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 240696 keys | 3276 slots | 0 slaves.
[OK] 1190255 keys in 5 masters.
72.65 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 820, 820, 819, 819 ] }
[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.126', slots: 820 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 272145 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 181485 keys | 2458 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 249922 keys | 3276 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 246007 keys | 3278 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 240696 keys | 3276 slots | 0 slaves.
[OK] 1190255 keys in 5 masters.
72.65 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.37', slots: 820 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 272145 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 121630 keys | 1638 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 309777 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 246007 keys | 3278 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 240696 keys | 3276 slots | 0 slaves.
[OK] 1190255 keys in 5 masters.
72.65 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.95', slots: 819 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 272145 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 59064 keys | 819 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 309777 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 246007 keys | 3278 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 303262 keys | 4095 slots | 0 slaves.
[OK] 1190255 keys in 5 masters.
72.65 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.71 TO 172.31.5.102 ###
[0m
{ reshardFrom: '172.31.5.71', reshardTo: '172.31.5.102', slots: 819 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 272145 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 309777 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 305071 keys | 4097 slots | 1 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 303262 keys | 4095 slots | 0 slaves.
[OK] 1190255 keys in 4 masters.
72.65 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.71:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.71:6379 6dcb7deea231e46f1e159b044f79761c38216436
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 272145 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 309777 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 305071 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 303262 keys | 4095 slots | 0 slaves.
[OK] 1190255 keys in 4 masters.
72.65 keys per slot on average.
 
total slots: 16384
Removing node 6dcb7deea231e46f1e159b044f79761c38216436 from cluster 172.31.5.71:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 272145 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 309777 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 305071 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 303262 keys | 4095 slots | 0 slaves.
[OK] 1190255 keys in 4 masters.
72.65 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 284611 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 322352 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 317577 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 315715 keys | 4095 slots | 0 slaves.
[OK] 1240255 keys in 4 masters.
75.70 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 4 }
[33m### REBALANCING CLUSTER ON 172.31.5.102:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.102:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 284611 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 322352 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 317577 keys | 4097 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 315715 keys | 4095 slots | 0 slaves.
[OK] 1240255 keys in 4 masters.
75.70 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 1366, 1366, 1365 ] }
[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.126 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.126', slots: 1366 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 392694 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 322352 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 209494 keys | 2731 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 315715 keys | 4095 slots | 0 slaves.
[OK] 1240255 keys in 4 masters.
75.70 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.37 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.37', slots: 1366 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 392694 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 427070 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 104776 keys | 1365 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 315715 keys | 4095 slots | 0 slaves.
[OK] 1240255 keys in 4 masters.
75.70 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.102 TO 172.31.5.95 ###
[0m
{ reshardFrom: '172.31.5.102', reshardTo: '172.31.5.95', slots: 1365 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 392694 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 427070 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 420491 keys | 5460 slots | 1 slaves.
[OK] 1240255 keys in 3 masters.
75.70 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.102:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.102:6379 d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 392694 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 427070 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 420491 keys | 5460 slots | 0 slaves.
[OK] 1240255 keys in 3 masters.
75.70 keys per slot on average.
 
total slots: 16384
Removing node d6a4f96d34f84f8f6ea68d4f3c224dd5e5f4c64f from cluster 172.31.5.102:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.126:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.126:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 392694 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 427070 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 420491 keys | 5460 slots | 0 slaves.
[OK] 1240255 keys in 3 masters.
75.70 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 409338 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 443769 keys | 5462 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 437148 keys | 5460 slots | 0 slaves.
[OK] 1290255 keys in 3 masters.
78.75 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.102:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.102:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 409338 keys | 5462 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 443769 keys | 5462 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 437148 keys | 5460 slots | 0 slaves.
[OK] 1290255 keys in 4 masters.
78.75 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.102:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.102:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 296896 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 337546 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 331004 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 324809 keys | 4096 slots | 0 slaves.
[OK] 1290255 keys in 4 masters.
78.75 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 4 nodes. Total weight = 4.00



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 309360 keys | 4096 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 350053 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 343565 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 337277 keys | 4096 slots | 0 slaves.
[OK] 1340255 keys in 4 masters.
81.80 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 4 }
[33m### ADDING 172.31.5.71:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.71:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 309360 keys | 4096 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 350053 keys | 4096 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 343565 keys | 4096 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 337277 keys | 4096 slots | 0 slaves.
[OK] 1340255 keys in 5 masters.
81.80 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.71:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.71:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 247595 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 272133 keys | 3280 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 279801 keys | 3276 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 273498 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 267228 keys | 3276 slots | 0 slaves.
[OK] 1340255 keys in 5 masters.
81.80 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 5 nodes. Total weight = 5.00



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 257632 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 282213 keys | 3280 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 289777 keys | 3276 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 283429 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 277204 keys | 3276 slots | 0 slaves.
[OK] 1390255 keys in 5 masters.
84.85 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 5 }
[33m### ADDING 172.31.5.73:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.73:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 257632 keys | 3276 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 282213 keys | 3280 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 289777 keys | 3276 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 283429 keys | 3276 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 277204 keys | 3276 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 0 keys | 0 slots | 0 slaves.
[OK] 1390255 keys in 6 masters.
84.85 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.73:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.73:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 212090 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 233652 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 241558 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 235180 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 234535 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 233240 keys | 2734 slots | 0 slaves.
[OK] 1390255 keys in 6 masters.
84.85 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 6 nodes. Total weight = 6.00



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 220400 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 242078 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 249868 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 243460 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 242890 keys | 2730 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 241559 keys | 2734 slots | 0 slaves.
[OK] 1440255 keys in 6 masters.
87.91 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 6 }
[33m### ADDING 172.31.5.219:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.219:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 220400 keys | 2730 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 242078 keys | 2730 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 249868 keys | 2730 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 243460 keys | 2730 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 242890 keys | 2730 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 241559 keys | 2734 slots | 0 slaves.
[OK] 1440255 keys in 7 masters.
87.91 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.219:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.219:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 184734 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 207847 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 214100 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 207837 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 214217 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 205929 keys | 2344 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 205591 keys | 2340 slots | 0 slaves.
[OK] 1440255 keys in 7 masters.
87.91 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 7 nodes. Total weight = 7.00



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 191906 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 215032 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 221210 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 214964 keys | 2340 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 221347 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 213081 keys | 2344 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 212715 keys | 2340 slots | 0 slaves.
[OK] 1490255 keys in 7 masters.
90.96 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 7 }
[33m### ADDING 172.31.5.19:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.19:6379 172.31.5.126:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 191906 keys | 2340 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 215032 keys | 2340 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 221210 keys | 2340 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 214964 keys | 2340 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 221347 keys | 2340 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 213081 keys | 2344 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 212715 keys | 2340 slots | 0 slaves.
[OK] 1490255 keys in 8 masters.
90.96 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.19:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.19:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 164334 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 192694 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 193658 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 188079 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 187365 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 193797 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 185143 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 185185 keys | 2048 slots | 0 slaves.
[OK] 1490255 keys in 8 masters.
90.96 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 50000 *******[0m

[33m### WRITING 50000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.126:6379 ###
[0m172.31.5.126:6379 (7687d70a...) -> 170636 keys | 2048 slots | 0 slaves.
172.31.5.71:6379 (6dcb7dee...) -> 199024 keys | 2048 slots | 0 slaves.
172.31.5.37:6379 (1b6ab05a...) -> 199875 keys | 2048 slots | 0 slaves.
172.31.5.102:6379 (d6a4f96d...) -> 194321 keys | 2048 slots | 0 slaves.
172.31.5.19:6379 (9f9a851b...) -> 193572 keys | 2048 slots | 0 slaves.
172.31.5.95:6379 (fd3a7f41...) -> 200027 keys | 2048 slots | 0 slaves.
172.31.5.219:6379 (3e541625...) -> 191381 keys | 2048 slots | 0 slaves.
172.31.5.73:6379 (7dd8a7e5...) -> 191419 keys | 2048 slots | 0 slaves.
[OK] 1540255 keys in 8 masters.
94.01 keys per slot on average.
 
total slots: 16384
0.05M keys written successfully

[34m******* write , 50000 completed ******* [0m 

Time Taken: 4967.66 seconds...

---DONE---
