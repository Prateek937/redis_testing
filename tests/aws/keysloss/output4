cluster Size: 1
------------------------------------------------------------------

[34m******* init  *******[0m

[33m### CREATING CLUSTER OF 3 NODES  172.31.5.59:6379 172.31.5.60:6379 172.31.5.124:6379 ###
[0m
> redis-cli --cluster create  172.31.5.59:6379 172.31.5.60:6379 172.31.5.124:6379 --cluster-replicas 0 --cluster-yes | grep OK | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion error.
 {
  keys1: 0,
  keys2: 0,
  keys: 0,
  slots1: 0,
  slots2: 16384,
  nodes1: 1,
  nodes2: 3,
  nodes: 2
}
precheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 0 keys | 0 slots | 0 slaves.
[OK] 0 keys in 1 masters.
0.00 keys per slot on average.

postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 0 keys | 5461 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 0 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 0 keys | 5462 slots | 0 slaves.
[OK] 0 keys in 3 masters.
0.00 keys per slot on average.
 
total slots: 16384
cluster created successfully

[34m******* init  completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166633 keys | 5461 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166621 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166746 keys | 5462 slots | 0 slaves.
[OK] 500000 keys in 3 masters.
30.52 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.191:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.191:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166633 keys | 5461 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166621 keys | 5461 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166746 keys | 5462 slots | 0 slaves.
[OK] 500000 keys in 4 masters.
30.52 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166633 keys | 5461 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166621 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166746 keys | 5462 slots | 0 slaves.
[OK] 500000 keys in 5 masters.
30.52 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166633 keys | 5461 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166621 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166746 keys | 5462 slots | 0 slaves.
[OK] 500000 keys in 6 masters.
30.52 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166633 keys | 5461 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166621 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166746 keys | 5462 slots | 0 slaves.
[OK] 500000 keys in 7 masters.
30.52 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.43:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.43:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166633 keys | 5461 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166621 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166746 keys | 5462 slots | 0 slaves.
[OK] 500000 keys in 8 masters.
30.52 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.191:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.191:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 62503 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 62453 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 62498 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 62505 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 62540 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 62491 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 62487 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 62523 keys | 2048 slots | 0 slaves.
[OK] 500000 keys in 8 masters.
30.52 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 125020 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 124780 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 124991 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 125004 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 125028 keys | 2048 slots | 0 slaves.
[OK] 1000000 keys in 8 masters.
61.04 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.43:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.43:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 125020 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 124780 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 124991 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 125004 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 125028 keys | 2048 slots | 0 slaves.
[OK] 1000000 keys in 8 masters.
61.04 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.59', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166563 keys | 2731 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 83237 keys | 1365 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 124991 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 125004 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 125028 keys | 2048 slots | 0 slaves.
[OK] 1000000 keys in 8 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.60', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166563 keys | 2731 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 41502 keys | 682 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 124991 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 125004 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166763 keys | 2731 slots | 0 slaves.
[OK] 1000000 keys in 8 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.124', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166563 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 124991 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166506 keys | 2730 slots | 1 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166763 keys | 2731 slots | 0 slaves.
[OK] 1000000 keys in 7 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.43:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.43:6379 e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166563 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 124991 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166506 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 166763 keys | 2731 slots | 0 slaves.
[OK] 1000000 keys in 7 masters.
61.04 keys per slot on average.
 
total slots: 16384
Removing node e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a from cluster 172.31.5.43:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.60', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166563 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 83218 keys | 1365 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 166506 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 208536 keys | 3414 slots | 0 slaves.
[OK] 1000000 keys in 7 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.124', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 166563 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 41650 keys | 682 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 208074 keys | 3413 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 208536 keys | 3414 slots | 0 slaves.
[OK] 1000000 keys in 7 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.59', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 208213 keys | 3413 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 208074 keys | 3413 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 208536 keys | 3414 slots | 0 slaves.
[OK] 1000000 keys in 6 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.107:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.107:6379 17dee0c28203fde051c1846dfff3c6665e2dc525
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 208213 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 124997 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 208074 keys | 3413 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 208536 keys | 3414 slots | 0 slaves.
[OK] 1000000 keys in 6 masters.
61.04 keys per slot on average.
 
total slots: 16384
Removing node 17dee0c28203fde051c1846dfff3c6665e2dc525 from cluster 172.31.5.107:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 208213 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 83437 keys | 1365 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 249634 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 208536 keys | 3414 slots | 0 slaves.
[OK] 1000000 keys in 6 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 249999 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 41651 keys | 682 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 249634 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 208536 keys | 3414 slots | 0 slaves.
[OK] 1000000 keys in 6 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 249999 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 249634 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 250187 keys | 4096 slots | 1 slaves.
[OK] 1000000 keys in 5 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 249999 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 125195 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 249634 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 250187 keys | 4096 slots | 0 slaves.
[OK] 1000000 keys in 5 masters.
61.04 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.59', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 291783 keys | 4779 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 83411 keys | 1365 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 249634 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 250187 keys | 4096 slots | 0 slaves.
[OK] 1000000 keys in 5 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.60', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 291783 keys | 4779 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 41651 keys | 682 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 249634 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 291947 keys | 4779 slots | 0 slaves.
[OK] 1000000 keys in 5 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.124', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 291783 keys | 4779 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 291285 keys | 4778 slots | 1 slaves.
172.31.5.60:6379 (960cdeb4...) -> 291947 keys | 4779 slots | 0 slaves.
[OK] 1000000 keys in 4 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.213:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.213:6379 2b0d27baffdbb126097aa42bfc75124f6f22020e
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 291783 keys | 4779 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 124985 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 291285 keys | 4778 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 291947 keys | 4779 slots | 0 slaves.
[OK] 1000000 keys in 4 masters.
61.04 keys per slot on average.
 
total slots: 16384
Removing node 2b0d27baffdbb126097aa42bfc75124f6f22020e from cluster 172.31.5.213:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.60', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 291783 keys | 4779 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 83222 keys | 1365 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 291285 keys | 4778 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 333710 keys | 5462 slots | 0 slaves.
[OK] 1000000 keys in 4 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.124', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 291783 keys | 4779 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 41643 keys | 682 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 332864 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 333710 keys | 5462 slots | 0 slaves.
[OK] 1000000 keys in 4 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.59', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 333426 keys | 5461 slots | 1 slaves.
172.31.5.124:6379 (e764dae3...) -> 332864 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 333710 keys | 5462 slots | 0 slaves.
[OK] 1000000 keys in 3 masters.
61.04 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.191:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.191:6379 076795e8cd80c48f88aae443f2a7840d2f820d7a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 333426 keys | 5461 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 332864 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 333710 keys | 5462 slots | 0 slaves.
[OK] 1000000 keys in 3 masters.
61.04 keys per slot on average.
 
total slots: 16384
Removing node 076795e8cd80c48f88aae443f2a7840d2f820d7a from cluster 172.31.5.191:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 333426 keys | 5461 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 332864 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 333710 keys | 5462 slots | 0 slaves.
[OK] 1000000 keys in 3 masters.
61.04 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500106 keys | 5461 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499445 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500449 keys | 5462 slots | 0 slaves.
[OK] 1500000 keys in 3 masters.
91.55 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.191:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.191:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500106 keys | 5461 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499445 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500449 keys | 5462 slots | 0 slaves.
[OK] 1500000 keys in 4 masters.
91.55 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500106 keys | 5461 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499445 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500449 keys | 5462 slots | 0 slaves.
[OK] 1500000 keys in 5 masters.
91.55 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500106 keys | 5461 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499445 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500449 keys | 5462 slots | 0 slaves.
[OK] 1500000 keys in 6 masters.
91.55 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500106 keys | 5461 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499445 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500449 keys | 5462 slots | 0 slaves.
[OK] 1500000 keys in 7 masters.
91.55 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.43:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.43:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500106 keys | 5461 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499445 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500449 keys | 5462 slots | 0 slaves.
[OK] 1500000 keys in 8 masters.
91.55 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.191:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.191:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 187779 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 187167 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 187762 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 187267 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 187461 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 187518 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 187524 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 187522 keys | 2048 slots | 0 slaves.
[OK] 1500000 keys in 8 masters.
91.55 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 250105 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 249849 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 250116 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 249997 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 250007 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 250036 keys | 2048 slots | 0 slaves.
[OK] 2000000 keys in 8 masters.
122.07 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.43:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.43:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 250105 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 249849 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 250116 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 249997 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 250007 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 250036 keys | 2048 slots | 0 slaves.
[OK] 2000000 keys in 8 masters.
122.07 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 512, 512, 512, 512 ] }
[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.59', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 312493 keys | 2560 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 187461 keys | 1536 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 250116 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 249997 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 250007 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 250036 keys | 2048 slots | 0 slaves.
[OK] 2000000 keys in 8 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.60', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 312493 keys | 2560 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 124883 keys | 1024 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 250116 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 249997 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 250007 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 312614 keys | 2560 slots | 0 slaves.
[OK] 2000000 keys in 8 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.124', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 312493 keys | 2560 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 62387 keys | 512 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 250116 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 249997 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 312503 keys | 2560 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 312614 keys | 2560 slots | 0 slaves.
[OK] 2000000 keys in 8 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.191', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 312493 keys | 2560 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 312503 keys | 2560 slots | 1 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 249997 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 312503 keys | 2560 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 312614 keys | 2560 slots | 0 slaves.
[OK] 2000000 keys in 7 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.43:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.43:6379 e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 312493 keys | 2560 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 312503 keys | 2560 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 249997 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 312503 keys | 2560 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 312614 keys | 2560 slots | 0 slaves.
[OK] 2000000 keys in 7 masters.
122.07 keys per slot on average.
 
total slots: 16384
Removing node e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a from cluster 172.31.5.43:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 512, 512, 512, 512 ] }
[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.60', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 312493 keys | 2560 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 312503 keys | 2560 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 187456 keys | 1536 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 312503 keys | 2560 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 375155 keys | 3072 slots | 0 slaves.
[OK] 2000000 keys in 7 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.124', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 312493 keys | 2560 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 312503 keys | 2560 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 124983 keys | 1024 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 374976 keys | 3072 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 375155 keys | 3072 slots | 0 slaves.
[OK] 2000000 keys in 7 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.191', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 312493 keys | 2560 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 374996 keys | 3072 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 62490 keys | 512 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 374976 keys | 3072 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 375155 keys | 3072 slots | 0 slaves.
[OK] 2000000 keys in 7 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.59', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 374983 keys | 3072 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 374996 keys | 3072 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 374976 keys | 3072 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 375155 keys | 3072 slots | 0 slaves.
[OK] 2000000 keys in 6 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.107:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.107:6379 17dee0c28203fde051c1846dfff3c6665e2dc525
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 374983 keys | 3072 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 374996 keys | 3072 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 249892 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 374976 keys | 3072 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 375155 keys | 3072 slots | 0 slaves.
[OK] 2000000 keys in 6 masters.
122.07 keys per slot on average.
 
total slots: 16384
Removing node 17dee0c28203fde051c1846dfff3c6665e2dc525 from cluster 172.31.5.107:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 512, 512, 512, 512 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 374983 keys | 3072 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 374996 keys | 3072 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 187486 keys | 1536 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437382 keys | 3584 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 375155 keys | 3072 slots | 0 slaves.
[OK] 2000000 keys in 6 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.191', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 374983 keys | 3072 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 437441 keys | 3584 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 125041 keys | 1024 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437382 keys | 3584 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 375155 keys | 3072 slots | 0 slaves.
[OK] 2000000 keys in 6 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 437579 keys | 3584 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 437441 keys | 3584 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 62445 keys | 512 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437382 keys | 3584 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 375155 keys | 3072 slots | 0 slaves.
[OK] 2000000 keys in 6 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 437579 keys | 3584 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 437441 keys | 3584 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437382 keys | 3584 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 437600 keys | 3584 slots | 1 slaves.
[OK] 2000000 keys in 5 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 437579 keys | 3584 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 437441 keys | 3584 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 249998 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437382 keys | 3584 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 437600 keys | 3584 slots | 0 slaves.
[OK] 2000000 keys in 5 masters.
122.07 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 512, 512, 512, 512 ] }
[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.191', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 437579 keys | 3584 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499846 keys | 4096 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 187593 keys | 1536 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437382 keys | 3584 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 437600 keys | 3584 slots | 0 slaves.
[OK] 2000000 keys in 5 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.59', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500176 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499846 keys | 4096 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 124996 keys | 1024 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437382 keys | 3584 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 437600 keys | 3584 slots | 0 slaves.
[OK] 2000000 keys in 5 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.60', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500176 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499846 keys | 4096 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 62558 keys | 512 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437382 keys | 3584 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500038 keys | 4096 slots | 0 slaves.
[OK] 2000000 keys in 5 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.124', slots: 512 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500176 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499846 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499940 keys | 4096 slots | 1 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500038 keys | 4096 slots | 0 slaves.
[OK] 2000000 keys in 4 masters.
122.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.213:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.213:6379 2b0d27baffdbb126097aa42bfc75124f6f22020e
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500176 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499846 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499940 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500038 keys | 4096 slots | 0 slaves.
[OK] 2000000 keys in 4 masters.
122.07 keys per slot on average.
 
total slots: 16384
Removing node 2b0d27baffdbb126097aa42bfc75124f6f22020e from cluster 172.31.5.213:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500176 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499846 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 499940 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 500038 keys | 4096 slots | 0 slaves.
[OK] 2000000 keys in 4 masters.
122.07 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 625439 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624743 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 624735 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 625083 keys | 4096 slots | 0 slaves.
[OK] 2500000 keys in 4 masters.
152.59 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 4 }
[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 625439 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624743 keys | 4096 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 624735 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 625083 keys | 4096 slots | 0 slaves.
[OK] 2500000 keys in 5 masters.
152.59 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 625439 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624743 keys | 4096 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 624735 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 625083 keys | 4096 slots | 0 slaves.
[OK] 2500000 keys in 6 masters.
152.59 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 625439 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624743 keys | 4096 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 624735 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 625083 keys | 4096 slots | 0 slaves.
[OK] 2500000 keys in 7 masters.
152.59 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.43:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.43:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 625439 keys | 4096 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624743 keys | 4096 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 624735 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 625083 keys | 4096 slots | 0 slaves.
[OK] 2500000 keys in 8 masters.
152.59 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.213:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.213:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 313207 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 312232 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 312435 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 312619 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 312308 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 312211 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 312524 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 312464 keys | 2048 slots | 0 slaves.
[OK] 2500000 keys in 8 masters.
152.59 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 375874 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 374669 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 374933 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 374763 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 374765 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 375007 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 374989 keys | 2048 slots | 0 slaves.
[OK] 3000000 keys in 8 masters.
183.11 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.43:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.43:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 375874 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 374669 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 374933 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 374763 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 374765 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 375007 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 374989 keys | 2048 slots | 0 slaves.
[OK] 3000000 keys in 8 masters.
183.11 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 410, 410, 410, 409, 409 ] }
[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.59', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 299888 keys | 1638 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 374933 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 374763 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 374765 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 375007 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 374989 keys | 2048 slots | 0 slaves.
[OK] 3000000 keys in 8 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.60', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 224623 keys | 1228 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 374933 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 374763 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 374765 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 375007 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 450254 keys | 2458 slots | 0 slaves.
[OK] 3000000 keys in 8 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.124', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 149738 keys | 818 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 374933 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 374763 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 374765 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 449892 keys | 2458 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 450254 keys | 2458 slots | 0 slaves.
[OK] 3000000 keys in 8 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.191', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 74685 keys | 409 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 449986 keys | 2457 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 374763 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 374765 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 449892 keys | 2458 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 450254 keys | 2458 slots | 0 slaves.
[OK] 3000000 keys in 8 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.213', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 449986 keys | 2457 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 449448 keys | 2457 slots | 1 slaves.
172.31.5.107:6379 (17dee0c2...) -> 374765 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 449892 keys | 2458 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 450254 keys | 2458 slots | 0 slaves.
[OK] 3000000 keys in 7 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.43:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.43:6379 e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 449986 keys | 2457 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 449448 keys | 2457 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 374765 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 449892 keys | 2458 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 450254 keys | 2458 slots | 0 slaves.
[OK] 3000000 keys in 7 masters.
183.11 keys per slot on average.
 
total slots: 16384
Removing node e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a from cluster 172.31.5.43:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 410, 410, 410, 409, 409 ] }
[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.60', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 449986 keys | 2457 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 449448 keys | 2457 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 299781 keys | 1638 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 449892 keys | 2458 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 7 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.124', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 449986 keys | 2457 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 449448 keys | 2457 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 224867 keys | 1228 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 524806 keys | 2868 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 7 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.191', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 524923 keys | 2867 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 449448 keys | 2457 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 149930 keys | 818 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 524806 keys | 2868 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 7 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.213', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 450655 keys | 2458 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 524923 keys | 2867 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 524317 keys | 2866 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 75061 keys | 409 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 524806 keys | 2868 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 7 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.59', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 525716 keys | 2867 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 524923 keys | 2867 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 524317 keys | 2866 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 524806 keys | 2868 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 6 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.107:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.107:6379 17dee0c28203fde051c1846dfff3c6665e2dc525
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 525716 keys | 2867 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 524923 keys | 2867 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 375000 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 524317 keys | 2866 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 524806 keys | 2868 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 6 masters.
183.11 keys per slot on average.
 
total slots: 16384
Removing node 17dee0c28203fde051c1846dfff3c6665e2dc525 from cluster 172.31.5.107:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 410, 410, 410, 409, 409 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 525716 keys | 2867 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 524923 keys | 2867 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 299689 keys | 1638 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 524317 keys | 2866 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 600117 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 6 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.191', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 525716 keys | 2867 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 599970 keys | 3277 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 224642 keys | 1228 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 524317 keys | 2866 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 600117 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 6 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.213', slots: 410 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 525716 keys | 2867 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 599970 keys | 3277 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 149350 keys | 818 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 599609 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 600117 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 6 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 600435 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 599970 keys | 3277 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 74631 keys | 409 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 599609 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 600117 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 525238 keys | 2868 slots | 0 slaves.
[OK] 3000000 keys in 6 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 409 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 600435 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 599970 keys | 3277 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 599609 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 600117 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 599869 keys | 3277 slots | 1 slaves.
[OK] 3000000 keys in 5 masters.
183.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 600435 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 599970 keys | 3277 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 599609 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 600117 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 599869 keys | 3277 slots | 0 slaves.
[OK] 3000000 keys in 5 masters.
183.11 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 600435 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 599970 keys | 3277 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 599609 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 600117 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 599869 keys | 3277 slots | 0 slaves.
[OK] 3000000 keys in 5 masters.
183.11 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 700251 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 700017 keys | 3277 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 699640 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 700140 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 699952 keys | 3277 slots | 0 slaves.
[OK] 3500000 keys in 5 masters.
213.62 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 5 }
[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 700251 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 700017 keys | 3277 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 699640 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 700140 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 699952 keys | 3277 slots | 0 slaves.
[OK] 3500000 keys in 6 masters.
213.62 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 700251 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 700017 keys | 3277 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 699640 keys | 3276 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 700140 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 699952 keys | 3277 slots | 0 slaves.
[OK] 3500000 keys in 7 masters.
213.62 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.43:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.43:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 700251 keys | 3276 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 700017 keys | 3277 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 699640 keys | 3276 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 700140 keys | 3278 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 699952 keys | 3277 slots | 0 slaves.
[OK] 3500000 keys in 8 masters.
213.62 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.244:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.244:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 437804 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 437938 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 437269 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 437488 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 437222 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 437249 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 437526 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 437504 keys | 2048 slots | 0 slaves.
[OK] 3500000 keys in 8 masters.
213.62 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500519 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 500737 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499648 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 499946 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 499503 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 500016 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 499934 keys | 2048 slots | 0 slaves.
[OK] 4000000 keys in 8 masters.
244.14 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.43:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.43:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 500519 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 500737 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499648 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 499946 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 499503 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 500016 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 499934 keys | 2048 slots | 0 slaves.
[OK] 4000000 keys in 8 masters.
244.14 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 342, 342, 341, 341, 341, 341 ] }
[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.59', slots: 342 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 416981 keys | 1706 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499648 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 499946 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 499503 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 500016 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 499934 keys | 2048 slots | 0 slaves.
[OK] 4000000 keys in 8 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.60', slots: 342 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 333735 keys | 1364 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499648 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 499946 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 499503 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 500016 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 583180 keys | 2390 slots | 0 slaves.
[OK] 4000000 keys in 8 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.124', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 250536 keys | 1023 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 499648 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 499946 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 499503 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 583215 keys | 2389 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 583180 keys | 2390 slots | 0 slaves.
[OK] 4000000 keys in 8 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.191', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 167032 keys | 682 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 583152 keys | 2389 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 499946 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 499503 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 583215 keys | 2389 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 583180 keys | 2390 slots | 0 slaves.
[OK] 4000000 keys in 8 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.213', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 83546 keys | 341 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 583152 keys | 2389 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 499946 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 582989 keys | 2389 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 583215 keys | 2389 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 583180 keys | 2390 slots | 0 slaves.
[OK] 4000000 keys in 8 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.244 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.244', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 583152 keys | 2389 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 583492 keys | 2389 slots | 1 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 582989 keys | 2389 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 583215 keys | 2389 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 583180 keys | 2390 slots | 0 slaves.
[OK] 4000000 keys in 7 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.43:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.43:6379 e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 583152 keys | 2389 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 583492 keys | 2389 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 582989 keys | 2389 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 499697 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 583215 keys | 2389 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 583180 keys | 2390 slots | 0 slaves.
[OK] 4000000 keys in 7 masters.
244.14 keys per slot on average.
 
total slots: 16384
Removing node e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a from cluster 172.31.5.43:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 342, 342, 341, 341, 341, 341 ] }
[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.60', slots: 342 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 583152 keys | 2389 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 583492 keys | 2389 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 582989 keys | 2389 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 416423 keys | 1706 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 583215 keys | 2389 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 666454 keys | 2732 slots | 0 slaves.
[OK] 4000000 keys in 7 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.124', slots: 342 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 583152 keys | 2389 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 583492 keys | 2389 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 582989 keys | 2389 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 333117 keys | 1364 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 666521 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 666454 keys | 2732 slots | 0 slaves.
[OK] 4000000 keys in 7 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.191', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 666744 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 583492 keys | 2389 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 582989 keys | 2389 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 249525 keys | 1023 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 666521 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 666454 keys | 2732 slots | 0 slaves.
[OK] 4000000 keys in 7 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.213', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 666744 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 583492 keys | 2389 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 666111 keys | 2730 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 166403 keys | 682 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 666521 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 666454 keys | 2732 slots | 0 slaves.
[OK] 4000000 keys in 7 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.244 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.244', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 584275 keys | 2390 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 666744 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 666961 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 666111 keys | 2730 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 82934 keys | 341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 666521 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 666454 keys | 2732 slots | 0 slaves.
[OK] 4000000 keys in 7 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.59', slots: 341 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 667209 keys | 2731 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 666744 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 666961 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 666111 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 666521 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 666454 keys | 2732 slots | 0 slaves.
[OK] 4000000 keys in 6 masters.
244.14 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.107:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.107:6379 17dee0c28203fde051c1846dfff3c6665e2dc525
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 667209 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 666744 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 666961 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 666111 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 666521 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 666454 keys | 2732 slots | 0 slaves.
[OK] 4000000 keys in 6 masters.
244.14 keys per slot on average.
 
total slots: 16384
Removing node 17dee0c28203fde051c1846dfff3c6665e2dc525 from cluster 172.31.5.107:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 667209 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 666744 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 666961 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 666111 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 666521 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 666454 keys | 2732 slots | 0 slaves.
[OK] 4000000 keys in 6 masters.
244.14 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 750672 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 750069 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 750254 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 749368 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 749912 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 749725 keys | 2732 slots | 0 slaves.
[OK] 4500000 keys in 6 masters.
274.66 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 6 }
[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 750672 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 750069 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 750254 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 749368 keys | 2730 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 749912 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 749725 keys | 2732 slots | 0 slaves.
[OK] 4500000 keys in 7 masters.
274.66 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.43:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.43:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 750672 keys | 2731 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 750069 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 750254 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 749368 keys | 2730 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 749912 keys | 2731 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 749725 keys | 2732 slots | 0 slaves.
[OK] 4500000 keys in 8 masters.
274.66 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.107:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.107:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 563197 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 563414 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 562023 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 562467 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 562349 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 561629 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 562533 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 562388 keys | 2048 slots | 0 slaves.
[OK] 4500000 keys in 8 masters.
274.66 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 625587 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 625834 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624607 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 624933 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 624840 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 624202 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 625051 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 624946 keys | 2048 slots | 0 slaves.
[OK] 5000000 keys in 8 masters.
305.18 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 8 }
[33m### REBALANCING CLUSTER ON 172.31.5.43:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.43:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 625587 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 625834 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624607 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 624933 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 624840 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 624202 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 625051 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 624946 keys | 2048 slots | 0 slaves.
[OK] 5000000 keys in 8 masters.
305.18 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [
    293, 293, 293,
    293, 292, 292,
    292
  ] }
[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.59', slots: 293 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 536287 keys | 1755 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624607 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 624933 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 624840 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 624202 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 625051 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 624946 keys | 2048 slots | 0 slaves.
[OK] 5000000 keys in 8 masters.
305.18 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.60', slots: 293 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 446665 keys | 1462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624607 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 624933 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 624840 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 624202 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 625051 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 714568 keys | 2341 slots | 0 slaves.
[OK] 5000000 keys in 8 masters.
305.18 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.124', slots: 293 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 357376 keys | 1169 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 624607 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 624933 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 624840 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 624202 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 714340 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 714568 keys | 2341 slots | 0 slaves.
[OK] 5000000 keys in 8 masters.
305.18 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.191', slots: 293 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 268127 keys | 876 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 713856 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 624933 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 624840 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 624202 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 714340 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 714568 keys | 2341 slots | 0 slaves.
[OK] 5000000 keys in 8 masters.
305.18 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.213', slots: 292 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 178838 keys | 584 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 713856 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 624933 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 714129 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 624202 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 714340 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 714568 keys | 2341 slots | 0 slaves.
[OK] 5000000 keys in 8 masters.
305.18 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.244 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.244', slots: 292 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 89444 keys | 292 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 713856 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 714327 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 714129 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 624202 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 714340 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 714568 keys | 2341 slots | 0 slaves.
[OK] 5000000 keys in 8 masters.
305.18 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.43 TO 172.31.5.107 ###
[0m
{ reshardFrom: '172.31.5.43', reshardTo: '172.31.5.107', slots: 292 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 713856 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 714327 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 714129 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 713646 keys | 2340 slots | 1 slaves.
172.31.5.124:6379 (e764dae3...) -> 714340 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 714568 keys | 2341 slots | 0 slaves.
[OK] 5000000 keys in 7 masters.
305.18 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.43:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.43:6379 e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 713856 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 714327 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 714129 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 713646 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 714340 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 714568 keys | 2341 slots | 0 slaves.
[OK] 5000000 keys in 7 masters.
305.18 keys per slot on average.
 
total slots: 16384
Removing node e5e1d6f77fc044cac3f6dbae8da347c66b7fc79a from cluster 172.31.5.43:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 715134 keys | 2341 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 713856 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 714327 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 714129 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 713646 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 714340 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 714568 keys | 2341 slots | 0 slaves.
[OK] 5000000 keys in 7 masters.
305.18 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 786683 keys | 2341 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 785807 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 784958 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 785731 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 786045 keys | 2341 slots | 0 slaves.
[OK] 5500000 keys in 7 masters.
335.69 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 7 }
[33m### REBALANCING CLUSTER ON 172.31.5.107:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.107:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 786683 keys | 2341 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 785807 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 784958 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 785731 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 786045 keys | 2341 slots | 0 slaves.
[OK] 5500000 keys in 7 masters.
335.69 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 780, 780, 780 ] }
[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.59', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1048270 keys | 3121 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 785807 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 523371 keys | 1560 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 785731 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 786045 keys | 2341 slots | 0 slaves.
[OK] 5500000 keys in 7 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.60', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1048270 keys | 3121 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 785807 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 261708 keys | 780 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 785731 keys | 2341 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1047708 keys | 3121 slots | 0 slaves.
[OK] 5500000 keys in 7 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.124', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1048270 keys | 3121 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 785807 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1047439 keys | 3121 slots | 1 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1047708 keys | 3121 slots | 0 slaves.
[OK] 5500000 keys in 6 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.107:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.107:6379 17dee0c28203fde051c1846dfff3c6665e2dc525
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1048270 keys | 3121 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 785807 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1047439 keys | 3121 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1047708 keys | 3121 slots | 0 slaves.
[OK] 5500000 keys in 6 masters.
335.69 keys per slot on average.
 
total slots: 16384
Removing node 17dee0c28203fde051c1846dfff3c6665e2dc525 from cluster 172.31.5.107:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 780, 780, 780 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1048270 keys | 3121 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 523871 keys | 1560 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1047439 keys | 3121 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1309644 keys | 3901 slots | 0 slaves.
[OK] 5500000 keys in 6 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1048270 keys | 3121 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 262329 keys | 780 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1308981 keys | 3901 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1309644 keys | 3901 slots | 0 slaves.
[OK] 5500000 keys in 6 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1310599 keys | 3901 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1308981 keys | 3901 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1309644 keys | 3901 slots | 0 slaves.
[OK] 5500000 keys in 5 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1310599 keys | 3901 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 785575 keys | 2340 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1308981 keys | 3901 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1309644 keys | 3901 slots | 0 slaves.
[OK] 5500000 keys in 5 masters.
335.69 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 780, 780, 780 ] }
[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.124', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1310599 keys | 3901 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 523556 keys | 1560 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1571000 keys | 4681 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1309644 keys | 3901 slots | 0 slaves.
[OK] 5500000 keys in 5 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.59', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1571959 keys | 4681 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 262196 keys | 780 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1571000 keys | 4681 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1309644 keys | 3901 slots | 0 slaves.
[OK] 5500000 keys in 5 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.60', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1571959 keys | 4681 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1571000 keys | 4681 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1571840 keys | 4681 slots | 1 slaves.
[OK] 5500000 keys in 4 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.213:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.213:6379 2b0d27baffdbb126097aa42bfc75124f6f22020e
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1571959 keys | 4681 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 785201 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1571000 keys | 4681 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1571840 keys | 4681 slots | 0 slaves.
[OK] 5500000 keys in 4 masters.
335.69 keys per slot on average.
 
total slots: 16384
Removing node 2b0d27baffdbb126097aa42bfc75124f6f22020e from cluster 172.31.5.213:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 781, 780, 780 ] }
[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.59', slots: 781 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1833703 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 523457 keys | 1560 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1571000 keys | 4681 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1571840 keys | 4681 slots | 0 slaves.
[OK] 5500000 keys in 4 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.60', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1833703 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 261187 keys | 780 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1571000 keys | 4681 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1834110 keys | 5461 slots | 0 slaves.
[OK] 5500000 keys in 4 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.124', slots: 780 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1833703 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1832187 keys | 5461 slots | 1 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1834110 keys | 5461 slots | 0 slaves.
[OK] 5500000 keys in 3 masters.
335.69 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.191:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.191:6379 076795e8cd80c48f88aae443f2a7840d2f820d7a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1833703 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1832187 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1834110 keys | 5461 slots | 0 slaves.
[OK] 5500000 keys in 3 masters.
335.69 keys per slot on average.
 
total slots: 16384
Removing node 076795e8cd80c48f88aae443f2a7840d2f820d7a from cluster 172.31.5.191:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1833703 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1832187 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1834110 keys | 5461 slots | 0 slaves.
[OK] 5500000 keys in 3 masters.
335.69 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000329 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1998989 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2000682 keys | 5461 slots | 0 slaves.
[OK] 6000000 keys in 3 masters.
366.21 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.191:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.191:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000329 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1998989 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2000682 keys | 5461 slots | 0 slaves.
[OK] 6000000 keys in 4 masters.
366.21 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000329 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1998989 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2000682 keys | 5461 slots | 0 slaves.
[OK] 6000000 keys in 5 masters.
366.21 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000329 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1998989 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2000682 keys | 5461 slots | 0 slaves.
[OK] 6000000 keys in 6 masters.
366.21 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000329 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1998989 keys | 5461 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2000682 keys | 5461 slots | 0 slaves.
[OK] 6000000 keys in 7 masters.
366.21 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.191:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.191:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 857725 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 856957 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 856715 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 856752 keys | 2341 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 858367 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 856721 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 856763 keys | 2340 slots | 0 slaves.
[OK] 6000000 keys in 7 masters.
366.21 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 7 nodes. Total weight = 7.00



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 928867 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 928458 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 928402 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 929581 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 928212 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 928228 keys | 2340 slots | 0 slaves.
[OK] 6500000 keys in 7 masters.
396.73 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 7 }
[33m### REBALANCING CLUSTER ON 172.31.5.107:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.107:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 928867 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 928458 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 928402 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 929581 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 928212 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 928228 keys | 2340 slots | 0 slaves.
[OK] 6500000 keys in 7 masters.
396.73 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 586, 585, 585, 585 ] }
[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.59', slots: 586 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1161489 keys | 2926 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 928458 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 928402 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 696959 keys | 1755 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 928212 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 928228 keys | 2340 slots | 0 slaves.
[OK] 6500000 keys in 7 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.60', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1161489 keys | 2926 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 928458 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 928402 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 464747 keys | 1170 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 928212 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1160440 keys | 2925 slots | 0 slaves.
[OK] 6500000 keys in 7 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.124', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1161489 keys | 2926 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 928458 keys | 2341 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 928402 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 232414 keys | 585 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1160545 keys | 2925 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1160440 keys | 2925 slots | 0 slaves.
[OK] 6500000 keys in 7 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.191', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1161489 keys | 2926 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1160872 keys | 2926 slots | 1 slaves.
172.31.5.244:6379 (f983022a...) -> 928402 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1160545 keys | 2925 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1160440 keys | 2925 slots | 0 slaves.
[OK] 6500000 keys in 6 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.107:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.107:6379 17dee0c28203fde051c1846dfff3c6665e2dc525
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1161489 keys | 2926 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1160872 keys | 2926 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 928402 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1160545 keys | 2925 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1160440 keys | 2925 slots | 0 slaves.
[OK] 6500000 keys in 6 masters.
396.73 keys per slot on average.
 
total slots: 16384
Removing node 17dee0c28203fde051c1846dfff3c6665e2dc525 from cluster 172.31.5.107:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 586, 585, 585, 585 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 586 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1161489 keys | 2926 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1160872 keys | 2926 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 696007 keys | 1755 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1160545 keys | 2925 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1392835 keys | 3511 slots | 0 slaves.
[OK] 6500000 keys in 6 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1161489 keys | 2926 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1160872 keys | 2926 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 463836 keys | 1170 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1392716 keys | 3510 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1392835 keys | 3511 slots | 0 slaves.
[OK] 6500000 keys in 6 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.191', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1161489 keys | 2926 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1392880 keys | 3511 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 231828 keys | 585 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1392716 keys | 3510 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1392835 keys | 3511 slots | 0 slaves.
[OK] 6500000 keys in 6 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1393317 keys | 3511 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 1392880 keys | 3511 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1392716 keys | 3510 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1392835 keys | 3511 slots | 0 slaves.
[OK] 6500000 keys in 5 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1393317 keys | 3511 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1392880 keys | 3511 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 928252 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1392716 keys | 3510 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1392835 keys | 3511 slots | 0 slaves.
[OK] 6500000 keys in 5 masters.
396.73 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 586, 585, 585, 585 ] }
[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.124', slots: 586 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1393317 keys | 3511 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1392880 keys | 3511 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 695813 keys | 1755 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1625155 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1392835 keys | 3511 slots | 0 slaves.
[OK] 6500000 keys in 5 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.191', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1393317 keys | 3511 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1624870 keys | 4096 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 463823 keys | 1170 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1625155 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1392835 keys | 3511 slots | 0 slaves.
[OK] 6500000 keys in 5 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.59', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1625298 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1624870 keys | 4096 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 231842 keys | 585 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1625155 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1392835 keys | 3511 slots | 0 slaves.
[OK] 6500000 keys in 5 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.60', slots: 585 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1625298 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1624870 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1625155 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1624677 keys | 4096 slots | 1 slaves.
[OK] 6500000 keys in 4 masters.
396.73 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.213:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.213:6379 2b0d27baffdbb126097aa42bfc75124f6f22020e
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1625298 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1624870 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1625155 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1624677 keys | 4096 slots | 0 slaves.
[OK] 6500000 keys in 4 masters.
396.73 keys per slot on average.
 
total slots: 16384
Removing node 2b0d27baffdbb126097aa42bfc75124f6f22020e from cluster 172.31.5.213:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1625298 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1624870 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1625155 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1624677 keys | 4096 slots | 0 slaves.
[OK] 6500000 keys in 4 masters.
396.73 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1750162 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1750043 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1749956 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1749839 keys | 4096 slots | 0 slaves.
[OK] 7000000 keys in 4 masters.
427.25 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 4 }
[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1750162 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1750043 keys | 4096 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1749956 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1749839 keys | 4096 slots | 0 slaves.
[OK] 7000000 keys in 5 masters.
427.25 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1750162 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1750043 keys | 4096 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1749956 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1749839 keys | 4096 slots | 0 slaves.
[OK] 7000000 keys in 6 masters.
427.25 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1750162 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1750043 keys | 4096 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1749956 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1749839 keys | 4096 slots | 0 slaves.
[OK] 7000000 keys in 7 masters.
427.25 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.213:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.213:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 999702 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 999874 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1000184 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1000678 keys | 2342 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1000104 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 999698 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 999760 keys | 2340 slots | 0 slaves.
[OK] 7000000 keys in 7 masters.
427.25 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 7 nodes. Total weight = 7.00



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1071189 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1071183 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1071658 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1072132 keys | 2342 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1071708 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1071062 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1071068 keys | 2340 slots | 0 slaves.
[OK] 7500000 keys in 7 masters.
457.76 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 7 }
[33m### REBALANCING CLUSTER ON 172.31.5.107:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.107:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1071189 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1071183 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1071658 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1072132 keys | 2342 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1071708 keys | 2341 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1071062 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1071068 keys | 2340 slots | 0 slaves.
[OK] 7500000 keys in 7 masters.
457.76 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 469, 468, 468, 468, 468 ] }
[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.59', slots: 469 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1071183 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1071658 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1072132 keys | 2342 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 857139 keys | 1872 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1071062 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1071068 keys | 2340 slots | 0 slaves.
[OK] 7500000 keys in 7 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.60', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1071183 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1071658 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1072132 keys | 2342 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 643020 keys | 1404 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1071062 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1285187 keys | 2808 slots | 0 slaves.
[OK] 7500000 keys in 7 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.124', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1071183 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1071658 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1072132 keys | 2342 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 428673 keys | 936 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1285409 keys | 2808 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1285187 keys | 2808 slots | 0 slaves.
[OK] 7500000 keys in 7 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.191', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1285518 keys | 2808 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1071658 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1072132 keys | 2342 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 214338 keys | 468 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1285409 keys | 2808 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1285187 keys | 2808 slots | 0 slaves.
[OK] 7500000 keys in 7 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.213', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1285518 keys | 2808 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1071658 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1286470 keys | 2810 slots | 1 slaves.
172.31.5.124:6379 (e764dae3...) -> 1285409 keys | 2808 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1285187 keys | 2808 slots | 0 slaves.
[OK] 7500000 keys in 6 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.107:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.107:6379 17dee0c28203fde051c1846dfff3c6665e2dc525
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1285518 keys | 2808 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1071658 keys | 2341 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1286470 keys | 2810 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1285409 keys | 2808 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1285187 keys | 2808 slots | 0 slaves.
[OK] 7500000 keys in 6 masters.
457.76 keys per slot on average.
 
total slots: 16384
Removing node 17dee0c28203fde051c1846dfff3c6665e2dc525 from cluster 172.31.5.107:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 469, 468, 468, 468, 468 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 469 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1285518 keys | 2808 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 857071 keys | 1872 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1286470 keys | 2810 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1285409 keys | 2808 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499774 keys | 3277 slots | 0 slaves.
[OK] 7500000 keys in 6 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1285518 keys | 2808 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 642655 keys | 1404 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1286470 keys | 2810 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499825 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499774 keys | 3277 slots | 0 slaves.
[OK] 7500000 keys in 6 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.191', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1499775 keys | 3276 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 428398 keys | 936 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1286470 keys | 2810 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499825 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499774 keys | 3277 slots | 0 slaves.
[OK] 7500000 keys in 6 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.213', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1285758 keys | 2809 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1499775 keys | 3276 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 214122 keys | 468 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1500746 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499825 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499774 keys | 3277 slots | 0 slaves.
[OK] 7500000 keys in 6 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 468 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1499880 keys | 3277 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 1499775 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1500746 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499825 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499774 keys | 3277 slots | 0 slaves.
[OK] 7500000 keys in 5 masters.
457.76 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1499880 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1499775 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1500746 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499825 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499774 keys | 3277 slots | 0 slaves.
[OK] 7500000 keys in 5 masters.
457.76 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1499880 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1499775 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1500746 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499825 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499774 keys | 3277 slots | 0 slaves.
[OK] 7500000 keys in 5 masters.
457.76 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1599975 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1599641 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1600893 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1599806 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1599685 keys | 3277 slots | 0 slaves.
[OK] 8000000 keys in 5 masters.
488.28 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 5 }
[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1599975 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1599641 keys | 3276 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1600893 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1599806 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1599685 keys | 3277 slots | 0 slaves.
[OK] 8000000 keys in 6 masters.
488.28 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1599975 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1599641 keys | 3276 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1600893 keys | 3278 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1599806 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1599685 keys | 3277 slots | 0 slaves.
[OK] 8000000 keys in 7 masters.
488.28 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.244:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.244:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1142677 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1143003 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1143110 keys | 2342 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1142986 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1143417 keys | 2342 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1142435 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1142372 keys | 2340 slots | 0 slaves.
[OK] 8000000 keys in 7 masters.
488.28 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 7 nodes. Total weight = 7.00



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1214037 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1214286 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1214674 keys | 2342 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1214353 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1214871 keys | 2342 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1213896 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1213883 keys | 2340 slots | 0 slaves.
[OK] 8500000 keys in 7 masters.
518.80 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 7 }
[33m### REBALANCING CLUSTER ON 172.31.5.107:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.107:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1214037 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1214286 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1214674 keys | 2342 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1214353 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1214871 keys | 2342 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1213896 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1213883 keys | 2340 slots | 0 slaves.
[OK] 8500000 keys in 7 masters.
518.80 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 391, 391, 390, 390, 390, 390 ] }
[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.59', slots: 391 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1416898 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1214286 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1214674 keys | 2342 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1214353 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1012010 keys | 1951 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1213896 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1213883 keys | 2340 slots | 0 slaves.
[OK] 8500000 keys in 7 masters.
518.80 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.60', slots: 391 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1416898 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1214286 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1214674 keys | 2342 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1214353 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 809188 keys | 1560 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1213896 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1416705 keys | 2731 slots | 0 slaves.
[OK] 8500000 keys in 7 masters.
518.80 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.124', slots: 390 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1416898 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1214286 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1214674 keys | 2342 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1214353 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 606893 keys | 1170 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1416191 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1416705 keys | 2731 slots | 0 slaves.
[OK] 8500000 keys in 7 masters.
518.80 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.191', slots: 390 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1416898 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1416780 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1214674 keys | 2342 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1214353 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 404399 keys | 780 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1416191 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1416705 keys | 2731 slots | 0 slaves.
[OK] 8500000 keys in 7 masters.
518.80 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.213', slots: 390 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1416898 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1416780 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1214674 keys | 2342 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1416449 keys | 2730 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 202303 keys | 390 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1416191 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1416705 keys | 2731 slots | 0 slaves.
[OK] 8500000 keys in 7 masters.
518.80 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.107 TO 172.31.5.244 ###
[0m
{ reshardFrom: '172.31.5.107', reshardTo: '172.31.5.244', slots: 390 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1416898 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1416780 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1416977 keys | 2732 slots | 1 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1416449 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1416191 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1416705 keys | 2731 slots | 0 slaves.
[OK] 8500000 keys in 6 masters.
518.80 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.107:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.107:6379 17dee0c28203fde051c1846dfff3c6665e2dc525
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1416898 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1416780 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1416977 keys | 2732 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1416449 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1416191 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1416705 keys | 2731 slots | 0 slaves.
[OK] 8500000 keys in 6 masters.
518.80 keys per slot on average.
 
total slots: 16384
Removing node 17dee0c28203fde051c1846dfff3c6665e2dc525 from cluster 172.31.5.107:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1416898 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1416780 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1416977 keys | 2732 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1416449 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1416191 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1416705 keys | 2731 slots | 0 slaves.
[OK] 8500000 keys in 6 masters.
518.80 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1500238 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1500415 keys | 2732 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1499755 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499492 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499999 keys | 2731 slots | 0 slaves.
[OK] 9000000 keys in 6 masters.
549.32 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 6 }
[33m### REBALANCING CLUSTER ON 172.31.5.244:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.244:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1500238 keys | 2731 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1500415 keys | 2732 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1499755 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499492 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499999 keys | 2731 slots | 0 slaves.
[OK] 9000000 keys in 6 masters.
549.32 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 911, 911, 910 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 911 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000567 keys | 3642 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1000086 keys | 1821 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1499755 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499492 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1499999 keys | 2731 slots | 0 slaves.
[OK] 9000000 keys in 6 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 911 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000567 keys | 3642 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 499868 keys | 910 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1499755 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1499492 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2000217 keys | 3642 slots | 0 slaves.
[OK] 9000000 keys in 6 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000567 keys | 3642 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1499755 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1999360 keys | 3640 slots | 1 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2000217 keys | 3642 slots | 0 slaves.
[OK] 9000000 keys in 5 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000567 keys | 3642 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1499755 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1999360 keys | 3640 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2000217 keys | 3642 slots | 0 slaves.
[OK] 9000000 keys in 5 masters.
549.32 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 910, 910, 910 ] }
[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.60', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000567 keys | 3642 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 999653 keys | 1820 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1999360 keys | 3640 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500319 keys | 4552 slots | 0 slaves.
[OK] 9000000 keys in 5 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.124', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2000567 keys | 3642 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 499878 keys | 910 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499135 keys | 4550 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500319 keys | 4552 slots | 0 slaves.
[OK] 9000000 keys in 5 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.59', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2500445 keys | 4552 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499135 keys | 4550 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500319 keys | 4552 slots | 0 slaves.
[OK] 9000000 keys in 4 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.213:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.213:6379 2b0d27baffdbb126097aa42bfc75124f6f22020e
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2500445 keys | 4552 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1500101 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499135 keys | 4550 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500319 keys | 4552 slots | 0 slaves.
[OK] 9000000 keys in 4 masters.
549.32 keys per slot on average.
 
total slots: 16384
Removing node 2b0d27baffdbb126097aa42bfc75124f6f22020e from cluster 172.31.5.213:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 910, 910, 910 ] }
[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.124', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2500445 keys | 4552 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 999874 keys | 1820 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2999362 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500319 keys | 4552 slots | 0 slaves.
[OK] 9000000 keys in 4 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.59', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 3000206 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 500113 keys | 910 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2999362 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500319 keys | 4552 slots | 0 slaves.
[OK] 9000000 keys in 4 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.60', slots: 910 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 3000206 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2999362 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3000432 keys | 5462 slots | 1 slaves.
[OK] 9000000 keys in 3 masters.
549.32 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.191:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.191:6379 076795e8cd80c48f88aae443f2a7840d2f820d7a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 3000206 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2999362 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3000432 keys | 5462 slots | 0 slaves.
[OK] 9000000 keys in 3 masters.
549.32 keys per slot on average.
 
total slots: 16384
Removing node 076795e8cd80c48f88aae443f2a7840d2f820d7a from cluster 172.31.5.191:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 3000206 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2999362 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3000432 keys | 5462 slots | 0 slaves.
[OK] 9000000 keys in 3 masters.
549.32 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 3166906 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3165970 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3167124 keys | 5462 slots | 0 slaves.
[OK] 9500000 keys in 3 masters.
579.83 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.191:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.191:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 3166906 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3165970 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3167124 keys | 5462 slots | 0 slaves.
[OK] 9500000 keys in 4 masters.
579.83 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 3166906 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3165970 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3167124 keys | 5462 slots | 0 slaves.
[OK] 9500000 keys in 5 masters.
579.83 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 3166906 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3165970 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3167124 keys | 5462 slots | 0 slaves.
[OK] 9500000 keys in 6 masters.
579.83 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.191:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.191:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1583166 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1584233 keys | 2732 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1583639 keys | 2731 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1583182 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1582889 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1582891 keys | 2730 slots | 0 slaves.
[OK] 9500000 keys in 6 masters.
579.83 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 6 nodes. Total weight = 6.00



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1666376 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1667644 keys | 2732 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1666866 keys | 2731 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1666605 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1666161 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1666348 keys | 2730 slots | 0 slaves.
[OK] 10000000 keys in 6 masters.
610.35 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 6 }
[33m### REBALANCING CLUSTER ON 172.31.5.244:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.244:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1666376 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1667644 keys | 2732 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1666866 keys | 2731 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1666605 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1666161 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1666348 keys | 2730 slots | 0 slaves.
[OK] 10000000 keys in 6 masters.
610.35 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 683, 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2083129 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1667644 keys | 2732 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1250113 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1666605 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1666161 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1666348 keys | 2730 slots | 0 slaves.
[OK] 10000000 keys in 6 masters.
610.35 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2083129 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1667644 keys | 2732 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 833172 keys | 1365 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1666605 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1666161 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2083289 keys | 3413 slots | 0 slaves.
[OK] 10000000 keys in 6 masters.
610.35 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2083129 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1667644 keys | 2732 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 416365 keys | 682 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1666605 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2082968 keys | 3413 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2083289 keys | 3413 slots | 0 slaves.
[OK] 10000000 keys in 6 masters.
610.35 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.191', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2083129 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2084009 keys | 3414 slots | 1 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1666605 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2082968 keys | 3413 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2083289 keys | 3413 slots | 0 slaves.
[OK] 10000000 keys in 5 masters.
610.35 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2083129 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2084009 keys | 3414 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1666605 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2082968 keys | 3413 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2083289 keys | 3413 slots | 0 slaves.
[OK] 10000000 keys in 5 masters.
610.35 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 683, 683, 683, 682 ] }
[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.60', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2083129 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2084009 keys | 3414 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1249861 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2082968 keys | 3413 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500033 keys | 4096 slots | 0 slaves.
[OK] 10000000 keys in 5 masters.
610.35 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.124', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2083129 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2084009 keys | 3414 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 833052 keys | 1365 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499777 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500033 keys | 4096 slots | 0 slaves.
[OK] 10000000 keys in 5 masters.
610.35 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.191', slots: 683 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2083129 keys | 3413 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2500957 keys | 4097 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 416104 keys | 682 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499777 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500033 keys | 4096 slots | 0 slaves.
[OK] 10000000 keys in 5 masters.
610.35 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.59', slots: 682 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2499233 keys | 4095 slots | 1 slaves.
172.31.5.191:6379 (076795e8...) -> 2500957 keys | 4097 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499777 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500033 keys | 4096 slots | 0 slaves.
[OK] 10000000 keys in 4 masters.
610.35 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.213:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.213:6379 2b0d27baffdbb126097aa42bfc75124f6f22020e
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2499233 keys | 4095 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2500957 keys | 4097 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499777 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500033 keys | 4096 slots | 0 slaves.
[OK] 10000000 keys in 4 masters.
610.35 keys per slot on average.
 
total slots: 16384
Removing node 2b0d27baffdbb126097aa42bfc75124f6f22020e from cluster 172.31.5.213:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2499233 keys | 4095 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2500957 keys | 4097 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499777 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2500033 keys | 4096 slots | 0 slaves.
[OK] 10000000 keys in 4 masters.
610.35 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2624045 keys | 4095 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2625972 keys | 4097 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2624764 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2625219 keys | 4096 slots | 0 slaves.
[OK] 10500000 keys in 4 masters.
640.87 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 4 }
[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2624045 keys | 4095 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2625972 keys | 4097 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2624764 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2625219 keys | 4096 slots | 0 slaves.
[OK] 10500000 keys in 5 masters.
640.87 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2624045 keys | 4095 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2625972 keys | 4097 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2624764 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2625219 keys | 4096 slots | 0 slaves.
[OK] 10500000 keys in 6 masters.
640.87 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.213:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.213:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1749551 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1749863 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1750545 keys | 2732 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1750764 keys | 2732 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1749482 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1749795 keys | 2730 slots | 0 slaves.
[OK] 10500000 keys in 6 masters.
640.87 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 6 nodes. Total weight = 6.00



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1832982 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1833429 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1833782 keys | 2732 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1834101 keys | 2732 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1832737 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1832969 keys | 2730 slots | 0 slaves.
[OK] 11000000 keys in 6 masters.
671.39 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 6 }
[33m### REBALANCING CLUSTER ON 172.31.5.244:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.244:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1832982 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1833429 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1833782 keys | 2732 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1834101 keys | 2732 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1832737 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1832969 keys | 2730 slots | 0 slaves.
[OK] 11000000 keys in 6 masters.
671.39 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 547, 547, 546, 546, 546 ] }
[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.59', slots: 547 }
assertion error.
 {
  keys1: 11000000,
  keys2: 9118566,
  keys: 0,
  slots1: 16384,
  slots2: 16384,
  nodes1: 6,
  nodes2: 6,
  nodes: 0
}
precheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1832982 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1833429 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1833782 keys | 2732 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1834101 keys | 2732 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1832737 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1832969 keys | 2730 slots | 0 slaves.
[OK] 11000000 keys in 6 masters.
671.39 keys per slot on average.

postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 318710 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1833429 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1466620 keys | 2185 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1834101 keys | 2732 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1832737 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1832969 keys | 2730 slots | 0 slaves.
[OK] 9118566 keys in 6 masters.
556.55 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.60', slots: 547 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 318710 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1833429 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1099520 keys | 1638 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1834101 keys | 2732 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1832737 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2200069 keys | 3277 slots | 0 slaves.
[OK] 9118566 keys in 6 masters.
556.55 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.124', slots: 546 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 318710 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1833429 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 732961 keys | 1092 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1834101 keys | 2732 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2199296 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2200069 keys | 3277 slots | 0 slaves.
[OK] 9118566 keys in 6 masters.
556.55 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.191', slots: 546 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 318710 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2200028 keys | 3276 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 366362 keys | 546 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1834101 keys | 2732 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2199296 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2200069 keys | 3277 slots | 0 slaves.
[OK] 9118566 keys in 6 masters.
556.55 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.244 TO 172.31.5.213 ###
[0m
{ reshardFrom: '172.31.5.244', reshardTo: '172.31.5.213', slots: 546 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 318710 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2200028 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 2200463 keys | 3278 slots | 1 slaves.
172.31.5.124:6379 (e764dae3...) -> 2199296 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2200069 keys | 3277 slots | 0 slaves.
[OK] 9118566 keys in 5 masters.
556.55 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.244:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.244:6379 f983022ae895b98dd11bb928b29ca2034a371da6
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 318710 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2200028 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 2200463 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2199296 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2200069 keys | 3277 slots | 0 slaves.
[OK] 9118566 keys in 5 masters.
556.55 keys per slot on average.
 
total slots: 16384
Removing node f983022ae895b98dd11bb928b29ca2034a371da6 from cluster 172.31.5.244:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 318710 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2200028 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 2200463 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2199296 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2200069 keys | 3277 slots | 0 slaves.
[OK] 9118566 keys in 5 masters.
556.55 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 418669 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2299885 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 2300532 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2299316 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2300164 keys | 3277 slots | 0 slaves.
[OK] 9618566 keys in 5 masters.
587.07 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 5 }
[33m### REBALANCING CLUSTER ON 172.31.5.213:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.213:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 418669 keys | 3277 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2299885 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 2300532 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2299316 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2300164 keys | 3277 slots | 0 slaves.
[OK] 9618566 keys in 5 masters.
587.07 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 1093, 1093, 1092 ] }
[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.59', slots: 1093 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1185884 keys | 4370 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2299885 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1533317 keys | 2185 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2299316 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2300164 keys | 3277 slots | 0 slaves.
[OK] 9618566 keys in 5 masters.
587.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.60', slots: 1093 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1185884 keys | 4370 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2299885 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 766052 keys | 1092 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2299316 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3067429 keys | 4370 slots | 0 slaves.
[OK] 9618566 keys in 5 masters.
587.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.124', slots: 1092 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1185884 keys | 4370 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2299885 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3065368 keys | 4368 slots | 1 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3067429 keys | 4370 slots | 0 slaves.
[OK] 9618566 keys in 4 masters.
587.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.213:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.213:6379 2b0d27baffdbb126097aa42bfc75124f6f22020e
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1185884 keys | 4370 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2299885 keys | 3276 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3065368 keys | 4368 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3067429 keys | 4370 slots | 0 slaves.
[OK] 9618566 keys in 4 masters.
587.07 keys per slot on average.
 
total slots: 16384
Removing node 2b0d27baffdbb126097aa42bfc75124f6f22020e from cluster 172.31.5.213:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
{ distribution: [ 1092, 1092, 1092 ] }
[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.60', slots: 1092 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1185884 keys | 4370 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1533330 keys | 2184 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3065368 keys | 4368 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3833984 keys | 5462 slots | 0 slaves.
[OK] 9618566 keys in 4 masters.
587.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.124', slots: 1092 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1185884 keys | 4370 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 766802 keys | 1092 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3831896 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3833984 keys | 5462 slots | 0 slaves.
[OK] 9618566 keys in 4 masters.
587.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.59', slots: 1092 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1952686 keys | 5462 slots | 1 slaves.
172.31.5.124:6379 (e764dae3...) -> 3831896 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3833984 keys | 5462 slots | 0 slaves.
[OK] 9618566 keys in 3 masters.
587.07 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.191:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.191:6379 076795e8cd80c48f88aae443f2a7840d2f820d7a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1952686 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3831896 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3833984 keys | 5462 slots | 0 slaves.
[OK] 9618566 keys in 3 masters.
587.07 keys per slot on average.
 
total slots: 16384
Removing node 076795e8cd80c48f88aae443f2a7840d2f820d7a from cluster 172.31.5.191:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1952686 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3831896 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3833984 keys | 5462 slots | 0 slaves.
[OK] 9618566 keys in 3 masters.
587.07 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2119665 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3998289 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 4000612 keys | 5462 slots | 0 slaves.
[OK] 10118566 keys in 3 masters.
617.59 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.191:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.191:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2119665 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3998289 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 4000612 keys | 5462 slots | 0 slaves.
[OK] 10118566 keys in 4 masters.
617.59 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 2119665 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3998289 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 4000612 keys | 5462 slots | 0 slaves.
[OK] 10118566 keys in 5 masters.
617.59 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.191:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.191:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 566824 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2352520 keys | 3278 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 2400851 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2398945 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2399426 keys | 3276 slots | 0 slaves.
[OK] 10118566 keys in 5 masters.
617.59 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 5 nodes. Total weight = 5.00



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 666652 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2452599 keys | 3278 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 2500899 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2498964 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2499452 keys | 3276 slots | 0 slaves.
[OK] 10618566 keys in 5 masters.
648.11 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 5 }
[33m### REBALANCING CLUSTER ON 172.31.5.213:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.213:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 666652 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2452599 keys | 3278 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 2500899 keys | 3278 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2498964 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2499452 keys | 3276 slots | 0 slaves.
[OK] 10618566 keys in 5 masters.
648.11 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 820, 820, 819, 819 ] }
[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.59', slots: 820 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1292043 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2452599 keys | 3278 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1875508 keys | 2458 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2498964 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2499452 keys | 3276 slots | 0 slaves.
[OK] 10618566 keys in 5 masters.
648.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.60', slots: 820 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1292043 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2452599 keys | 3278 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1249720 keys | 1638 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2498964 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3125240 keys | 4096 slots | 0 slaves.
[OK] 10618566 keys in 5 masters.
648.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.124', slots: 819 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1292043 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 2452599 keys | 3278 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 624917 keys | 819 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3123767 keys | 4095 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3125240 keys | 4096 slots | 0 slaves.
[OK] 10618566 keys in 5 masters.
648.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.213 TO 172.31.5.191 ###
[0m
{ reshardFrom: '172.31.5.213', reshardTo: '172.31.5.191', slots: 819 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1292043 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 3077516 keys | 4097 slots | 1 slaves.
172.31.5.124:6379 (e764dae3...) -> 3123767 keys | 4095 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3125240 keys | 4096 slots | 0 slaves.
[OK] 10618566 keys in 4 masters.
648.11 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.213:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.213:6379 2b0d27baffdbb126097aa42bfc75124f6f22020e
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1292043 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 3077516 keys | 4097 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3123767 keys | 4095 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3125240 keys | 4096 slots | 0 slaves.
[OK] 10618566 keys in 4 masters.
648.11 keys per slot on average.
 
total slots: 16384
Removing node 2b0d27baffdbb126097aa42bfc75124f6f22020e from cluster 172.31.5.213:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1292043 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 3077516 keys | 4097 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3123767 keys | 4095 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3125240 keys | 4096 slots | 0 slaves.
[OK] 10618566 keys in 4 masters.
648.11 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1417036 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 125055 keys | 4097 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3248776 keys | 4095 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3250184 keys | 4096 slots | 0 slaves.
[OK] 8041051 keys in 4 masters.
490.79 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 3 *******[0m

{ clusterSize: 4 }
[33m### REBALANCING CLUSTER ON 172.31.5.191:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.191:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1417036 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 125055 keys | 4097 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3248776 keys | 4095 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3250184 keys | 4096 slots | 0 slaves.
[OK] 8041051 keys in 4 masters.
490.79 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


{ distribution: [ 1366, 1366, 1365 ] }
[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.59 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.59', slots: 1366 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1458689 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 83402 keys | 2731 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3248776 keys | 4095 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3250184 keys | 4096 slots | 0 slaves.
[OK] 8041051 keys in 4 masters.
490.79 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.60 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.60', slots: 1366 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1458689 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 41672 keys | 1365 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3248776 keys | 4095 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3291914 keys | 5462 slots | 0 slaves.
[OK] 8041051 keys in 4 masters.
490.79 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### RESHARDING FROM 172.31.5.191 TO 172.31.5.124 ###
[0m
{ reshardFrom: '172.31.5.191', reshardTo: '172.31.5.124', slots: 1365 }
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1458689 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3290448 keys | 5460 slots | 1 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3291914 keys | 5462 slots | 0 slaves.
[OK] 8041051 keys in 3 masters.
490.79 keys per slot on average.
 
total slots: 16384
resharded successfully!
waiting... 2 1 


[33m### REMOVING 172.31.5.191:6379 FROM CLUSTER ###
[0m
> redis-cli --cluster del-node 172.31.5.191:6379 076795e8cd80c48f88aae443f2a7840d2f820d7a
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1458689 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3290448 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3291914 keys | 5462 slots | 0 slaves.
[OK] 8041051 keys in 3 masters.
490.79 keys per slot on average.
 
total slots: 16384
Removing node 076795e8cd80c48f88aae443f2a7840d2f820d7a from cluster 172.31.5.191:6379
Sending CLUSTER FORGET messages to the cluster...
Sending CLUSTER RESET SOFT to the deleted node.
[33m### REBALANCING CLUSTER ON 172.31.5.59:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.59:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1458689 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3290448 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3291914 keys | 5462 slots | 0 slaves.
[OK] 8041051 keys in 3 masters.
490.79 keys per slot on average.
 
total slots: 16384
*** No rebalancing needed! All nodes are within the 2.00% threshold.


waiting... 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 



[34m******* resize , 3 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1625497 keys | 5462 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3457125 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3458429 keys | 5462 slots | 0 slaves.
[OK] 8541051 keys in 3 masters.
521.30 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 4 *******[0m

{ clusterSize: 3 }
[33m### ADDING 172.31.5.191:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.191:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1625497 keys | 5462 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 3457125 keys | 5460 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3458429 keys | 5462 slots | 0 slaves.
[OK] 8541051 keys in 4 masters.
521.30 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.191:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.191:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1437020 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 979239 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2749750 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3375042 keys | 4096 slots | 0 slaves.
[OK] 8541051 keys in 4 masters.
521.30 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 4 nodes. Total weight = 4.00



[34m******* resize , 4 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1562153 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1104200 keys | 4096 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2874743 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3499955 keys | 4096 slots | 0 slaves.
[OK] 9041051 keys in 4 masters.
551.82 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 5 *******[0m

{ clusterSize: 4 }
[33m### ADDING 172.31.5.213:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.213:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1562153 keys | 4096 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1104200 keys | 4096 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2874743 keys | 4096 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 3499955 keys | 4096 slots | 0 slaves.
[OK] 9041051 keys in 5 masters.
551.82 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.213:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.213:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 966900 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1029207 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1446816 keys | 3280 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2798884 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2799244 keys | 3276 slots | 0 slaves.
[OK] 9041051 keys in 5 masters.
551.82 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 5 nodes. Total weight = 5.00



[34m******* resize , 5 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1066968 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1129228 keys | 3276 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1546868 keys | 3280 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2898801 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2899186 keys | 3276 slots | 0 slaves.
[OK] 9541051 keys in 5 masters.
582.34 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 6 *******[0m

{ clusterSize: 5 }
[33m### ADDING 172.31.5.244:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.244:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 1066968 keys | 3276 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1129228 keys | 3276 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1546868 keys | 3280 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2898801 keys | 3276 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2899186 keys | 3276 slots | 0 slaves.
[OK] 9541051 keys in 6 masters.
582.34 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.244:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.244:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 602589 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 957487 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1668979 keys | 2734 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1480013 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2415984 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2415999 keys | 2730 slots | 0 slaves.
[OK] 9541051 keys in 6 masters.
582.34 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 6 nodes. Total weight = 6.00



[34m******* resize , 6 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 686035 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1040865 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1752312 keys | 2734 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1563413 keys | 2730 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499296 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2499130 keys | 2730 slots | 0 slaves.
[OK] 10041051 keys in 6 masters.
612.86 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 7 *******[0m

{ clusterSize: 6 }
[33m### ADDING 172.31.5.107:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.107:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 686035 keys | 2730 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1040865 keys | 2730 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1752312 keys | 2734 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1563413 keys | 2730 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2499296 keys | 2730 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2499130 keys | 2730 slots | 0 slaves.
[OK] 10041051 keys in 7 masters.
612.86 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.107:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.107:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 571450 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 981465 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1692530 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1412374 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1099042 keys | 2344 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2142039 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2142151 keys | 2340 slots | 0 slaves.
[OK] 10041051 keys in 7 masters.
612.86 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 7 nodes. Total weight = 7.00



[34m******* resize , 7 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 642828 keys | 2340 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1052808 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1763953 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1483839 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1170542 keys | 2344 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2213469 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2213612 keys | 2340 slots | 0 slaves.
[OK] 10541051 keys in 7 masters.
643.37 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

------------------------------------------------------------------

[34m******* resize , 8 *******[0m

{ clusterSize: 7 }
[33m### ADDING 172.31.5.43:6379 NODE TO CLUSTER ###
[0m
> redis-cli --cluster add-node 172.31.5.43:6379 172.31.5.59:6379 | awk '{ gsub(/[[0-9;]*m/, ""); print }'
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 642828 keys | 2340 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 0 keys | 0 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1052808 keys | 2340 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1763953 keys | 2340 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1483839 keys | 2340 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1170542 keys | 2344 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2213469 keys | 2340 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 2213612 keys | 2340 slots | 0 slaves.
[OK] 10541051 keys in 8 masters.
643.37 keys per slot on average.
 
total slots: 16384
node added successfully
waiting... 2 1 


waiting... 10 9 8 7 6 5 4 3 2 1 


[33m### REBALANCING CLUSTER ON 172.31.5.43:6379 ###
[0m
> redis-cli --cluster rebalance 172.31.5.43:6379 --cluster-use-empty-masters | grep -i Rebalancing
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 562649 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 1068073 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 999512 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1710450 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1208813 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1116602 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 1937606 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1937346 keys | 2048 slots | 0 slaves.
[OK] 10541051 keys in 8 masters.
643.37 keys per slot on average.
 
total slots: 16384
>>> Rebalancing across 8 nodes. Total weight = 8.00



[34m******* resize , 8 completed ******* [0m 

------------------------------------------------------------------

[34m******* write , 500000 *******[0m

[33m### WRITING 500000 KEYS ###
[0m
assertion success.
postcheck: 
 [33m### CHECK NODE 172.31.5.59:6379 ###
[0m172.31.5.59:6379 (b3b355db...) -> 625115 keys | 2048 slots | 0 slaves.
172.31.5.43:6379 (e5e1d6f7...) -> 1130616 keys | 2048 slots | 0 slaves.
172.31.5.191:6379 (076795e8...) -> 1061928 keys | 2048 slots | 0 slaves.
172.31.5.244:6379 (f983022a...) -> 1772947 keys | 2048 slots | 0 slaves.
172.31.5.213:6379 (2b0d27ba...) -> 1271313 keys | 2048 slots | 0 slaves.
172.31.5.107:6379 (17dee0c2...) -> 1179150 keys | 2048 slots | 0 slaves.
172.31.5.124:6379 (e764dae3...) -> 2000104 keys | 2048 slots | 0 slaves.
172.31.5.60:6379 (960cdeb4...) -> 1999878 keys | 2048 slots | 0 slaves.
[OK] 11041051 keys in 8 masters.
673.89 keys per slot on average.
 
total slots: 16384
0.5M keys written successfully

[34m******* write , 500000 completed ******* [0m 

Time Taken: 14141.718 seconds...

---DONE---
